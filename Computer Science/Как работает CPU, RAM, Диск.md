## 0. ะะฒะตะดะตะฝะธะต: ะฟะพัะตะผั ะฟัะพะณัะฐะผะผะธัั ะดะพะปะถะตะฝ ะทะฝะฐัั ะถะตะปะตะทะพ

### ะะฑัััะฐะบัะธะธ ัะตะบัั

> _ะัะต ะฝะตััะธะฒะธะฐะปัะฝัะต ะฐะฑัััะฐะบัะธะธ ะฒ ัะพะน ะธะปะธ ะธะฝะพะน ััะตะฟะตะฝะธ ะดัััะฒัะต._  
> โ ะะถะพัะป ะกะฟะพะปััะบะธ, ยซะะฐะบะพะฝ ะดัััะฒัั ะฐะฑัััะฐะบัะธะนยป (2002)

ะฏะทัะบะธ ะฒััะพะบะพะณะพ ััะพะฒะฝั โ Java, Python, C# โ ะฟััััั ะพั ะฒะฐั ะดะตัะฐะปะธ. ะั ะฟะธัะตัะตย`new Object()`ยะธ ะฝะต ะดัะผะฐะตัะต, ะณะดะต ะธะผะตะฝะฝะพ ะฒ ะฟะฐะผััะธ ะพะฝ ะพะบะฐะถะตััั. ะัะทัะฒะฐะตัะต ะผะตัะพะด ะธ ะฝะต ะทะฐะดัะผัะฒะฐะตัะตัั, ะบะฐะบ ะฟัะพัะตััะพั ัะทะฝะฐัั, ะบัะดะฐ ะฒะตัะฝััััั ะฟะพัะปะต ะตะณะพ ะทะฐะฒะตััะตะฝะธั.

ะญัะพ ัะฐะฑะพัะฐะตั โ ะดะพ ัะตั ะฟะพั, ะฟะพะบะฐ ะฝะต ะฟะตัะตััะฐัั ัะฐะฑะพัะฐัั.

### ะะพะณะดะฐ ะฐะฑัััะฐะบัะธั ััะตัะธั ะฟะพ ัะฒะฐะผ

- ะั ะปะพะฒะธัะตย`OutOfMemoryError`ยะฝะฐ ะฟัะพะดะต ะฒ ััะธ ัะฐัะฐ ะฝะพัะธ ะธ ะฝะต ะฟะพะฝะธะผะฐะตัะต, ะพัะบัะดะฐ ะพะฝ ะฒะทัะปัั.
- ะฆะธะบะป ัย`int`ยัะฐะฑะพัะฐะตั ะทะฐะผะตัะฝะพ ะฑััััะตะต, ัะตะผ ัะพั ะถะต ัะธะบะป ัย`Integer`, โ ะธ ะฒั ะฝะต ะผะพะถะตัะต ะพะฑัััะฝะธัั ะฟะพัะตะผั.
- ะั ะฒะธะดะธัะตย`StackOverflowError`ยะธ ะฝะต ะทะฝะฐะตัะต, ััะพ ะทะฐ ยซััะตะบยป ะฟะตัะตะฟะพะปะฝะธะปัั ะธ ัะตะผ ะพะฝ ะพัะปะธัะฐะตััั ะพั ยซะบััะธยป.
- ะั ะฟะพะปััะฐะตัะตย`NullPointerException`ยะฟัะธ ะธะทะฒะปะตัะตะฝะธะธ ะทะฝะฐัะตะฝะธั ะธะทย`Integer`, ัะพัั ยซัะฐะผ ัะพัะฝะพ ะฑัะปะพ ัะธัะปะพยป.
- `Integer.valueOf(127) == Integer.valueOf(127)`ยะฒะพะทะฒัะฐัะฐะตัย`true`, ะฐย`Integer.valueOf(128) == Integer.valueOf(128)`ยโย`false`, ะธ ะฒั ะฝะต ะฟะพะฝะธะผะฐะตัะต, ะบะฐะบะฐั ะผะฐะณะธั ะทะฐ ััะธะผ ััะพะธั.
- ะั ัะธัะฐะตัะต ะดะพะบัะผะตะฝัะฐัะธั ะฟะพ GC ะธ ะฝะต ะฟะพะฝะธะผะฐะตัะต ะฝะธ ัะปะพะฒะฐ, ะฟะพัะพะผั ััะพ ะฝะต ะทะฝะฐะตัะต, ะบะฐะบ ััััะพะตะฝะฐ ะฟะฐะผััั ะฟัะพัะตััะฐ.

ะะฐะถะดะฐั ะธะท ััะธั ัะธััะฐัะธะน โ ะผะพะผะตะฝั, ะบะพะณะดะฐ ะฐะฑัััะฐะบัะธั ะฟัะพัะตะบะปะฐ ะธ ะฒั ะพััะฐะปะธัั ะพะดะธะฝ ะฝะฐ ะพะดะธะฝ ั ัะตะผ, ััะพ ะฝะฐัะพะดะธััั ะฟะพะด ะฝะตะน.

### ะะปั ะบะพะณะพ ััะฐ ััะฐััั

ะญัะฐ ััะฐััั ะดะปั Java-ัะฐะทัะฐะฑะพััะธะบะพะฒ ััะพะฒะฝั JuniorโMiddle, ะบะพัะพััะต ัะพััั ะฟะพะฝััั, ััะพ ะฟัะพะธััะพะดะธั ะผะตะถะดั ะธั ะบะพะดะพะผ ะธ ะถะตะปะตะทะพะผ. ะั ะฝะต ัะตะปะธะผัั ะฒ ัะธััะตะผะฝัั ะฟัะพะณัะฐะผะผะธััะพะฒ โ ะผั ัะตะปะธะผัั ะฒ ัะตั, ะบัะพ ัะพัะตั ะพัะพะทะฝะฐะฝะฝะพ ะฒัะฑะธัะฐัั ะผะตะถะดัย`int`ยะธย`Integer`, ะฟะพะฝะธะผะฐัั, ะฟะพัะตะผัย`==`ยะดะปั ะพะฑัััะพะบ ัะฐะฑะพัะฐะตั ยซะธะฝะพะณะดะฐยป, ะธ ัะธัะฐัั stack trace ะฝะต ะบะฐะบ ะทะฐะบะปะธะฝะฐะฝะธะต, ะฐ ะบะฐะบ ะดะธะฐะณะฝะพะท.

### ะฆะตะปั ััะฐััะธ

ะะฐัั ะฒะฐะผ ะผะธะฝะธะผะฐะปัะฝัะน ะฝะฐะฑะพั ะผะตะฝัะฐะปัะฝัั ะผะพะดะตะปะตะน, ััะพะฑั ะฟะพะฝะธะผะฐัั, ััะพ ะฟัะพะธััะพะดะธั ะฟะพะด ะบะฐะฟะพัะพะผ:

1. ะะฐะบ ัะฐะฑะพัะฐะตั ะฟัะพัะตััะพั ะฝะฐ ัะฐะผะพะผ ะฑะฐะทะพะฒะพะผ ััะพะฒะฝะต.
2. ะะฐะบ ะดะฐะฝะฝัะต ะฟัะตะดััะฐะฒะปะตะฝั ะฒ ะฟะฐะผััะธ.
3. ะงะตะผ ััะตะบ ะพัะปะธัะฐะตััั ะพั ะบััะธ ะธ ะฟะพัะตะผั ััะพ ะฒะฐะถะฝะพ ะบะฐะถะดัะน ะดะตะฝั.
4. ะะพัะตะผัย`int`ยะธย`Integer`ยโ ะฝะต ะพะดะฝะพ ะธ ัะพ ะถะต ั ัะพัะบะธ ะทัะตะฝะธั ะถะตะปะตะทะฐ.
5. ะงัะพ ัะฐะบะพะต Integer Cache ะธ ะฟะพัะตะผัย`==`ยะดะปั ะพะฑัััะพะบ โ ะผะธะฝะฝะพะต ะฟะพะปะต.

### ะะฐะบ ัะธัะฐัั ััั ััะฐััั

ะะฐะทะดะตะปั ะฒััััะพะตะฝั ะพั ัะธะทะธัะตัะบะพะณะพ ััะพะฒะฝั (ะฟัะพัะตััะพั, ะฑะธัั) ะบ ะฟัะพะณัะฐะผะผะฝะพะผั (Stack, Heap, Java-ัะธะฟั). ะะฐะถะดัะน ัะฐะทะดะตะป ะพะฟะธัะฐะตััั ะฝะฐ ะฟัะตะดัะดััะธะน: ััะพะฑั ะฟะพะฝััั, ะฟะพัะตะผัย`Integer`ยะดะพัะพะถะตย`int`, ะฝัะถะฝะพ ัะฝะฐัะฐะปะฐ ะฟะพะฝััั, ััะพ ัะฐะบะพะต ะบััะฐ; ััะพะฑั ะฟะพะฝััั ะบััั โ ะบะฐะบ ััััะพะตะฝะฐ ะฟะฐะผััั. ะัะปะธ ะฒั ัะถะต ัะฒะตัะตะฝะฝะพ ะทะฝะฐะตัะต, ะบะฐะบ ัะฐะฑะพัะฐะตั ะฟัะพัะตััะพั ะธ ััะพ ัะฐะบะพะต ะดะฒะพะธัะฝะฐั ัะธััะตะผะฐ โ ะผะพะถะตัะต ะฝะฐัะฐัั ั ัะฐะทะดะตะปะฐ 3.

### ะะธัะบะปะตะนะผะตั

ะั ัะพะทะฝะฐัะตะปัะฝะพ ัะฟัะพัะฐะตะผ. ะ ัะตะฐะปัะฝะพััะธ ะฒัั ัะปะพะถะฝะตะต: ะบะพะฝะฒะตะนะตัั, ัะฟะตะบัะปััะธะฒะฝะพะต ะฒัะฟะพะปะฝะตะฝะธะต, ััะฟะตััะบะฐะปััะฝะพััั, ะฒะธัััะฐะปัะฝะฐั ะฟะฐะผััั ัะพ ัััะฐะฝะธัะฝะพะน ะพัะณะฐะฝะธะทะฐัะธะตะน ะธ ะตัั ัะพัะฝะธ ะดะตัะฐะปะตะน. ะะฝะฐะปะพะณะธะธ ะฟะพะผะพะณะฐัั ะฝะฐัะฐัั ะฟะพะฝะธะผะฐัั, ะฝะพ ั ะบะฐะถะดะพะน ะตััั ะฟัะตะดะตะป โ ะธ ะผั ะฑัะดะตะผ ัะตััะฝะพ ัะบะฐะทัะฒะฐัั, ะณะดะต ะพะฝะฐ ะปะพะผะฐะตััั.

---

## 1. ะะตะปะตะทะพ: ะบะฐะบ ัะฐะฑะพัะฐะตั ะบะพะผะฟัััะตั ะฝะฐ ะฑะฐะทะพะฒะพะผ ััะพะฒะฝะต

### 1.1. ะะตัะฐััะธั ะฟะฐะผััะธ: ะพั ะดะธัะบะฐ ะดะพ ัะตะณะธัััะฐ

ะ ะปัะฑะพะผ ะบะพะผะฟัััะตัะต โ ะพั ัะตัะฒะตัะฐ ะฒ ะดะฐัะฐ-ัะตะฝััะต ะดะพ ะฒะฐัะตะณะพ ัะตะปะตัะพะฝะฐ โ ะดะฐะฝะฝัะต ะถะธะฒัั ะฝะฐ ะฝะตัะบะพะปัะบะธั ััะพะฒะฝัั. ะะปััะตะฒะพะน ะฟัะธะฝัะธะฟ:ย**ัะตะผ ะฑะปะธะถะต ะบ ะฟัะพัะตััะพัั, ัะตะผ ะฑััััะตะต ะธ ะผะตะฝััะต ะฟะพ ะพะฑััะผั**.

text

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                       ะะะะะะฅะะฏ ะะะะฏะขะ                               โ
โ                                                                     โ
โ   ะััััะตะต โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโบ ะะพะปััะต         โ
โ   ะะตะฝััะต                                             ะะตะดะปะตะฝะฝะตะต      โ
โ                                                                     โ
โ  โโโโโโโโโโโโ โโโโโโโโโโ โโโโโโโโโโ โโโโโโโโ โโโโโโโโ โโโโโโโโโโโ  โ
โ  โ ะะตะณะธัััั โโโ   L1   โโโ   L2   โโโ  L3  โโโ RAM  โโโ HDD/SSD โ  โ
โ  โ  ~1 ัะฐะบั โ โ ~4 ั.  โ โ~10-14ั.โ โ~40 ั.โ โ~200 ัโ โ  ะผะปะฝ ั. โ  โ
โ  โ ะดะตัััะบะธ  โ โ 32-64  โ โ256 ะะ- โ โ ะะ   โ โ ะะ   โ โ  ะขะ     โ  โ
โ  โ  ัััะบ    โ โ  ะะ    โ โ  1 ะะ  โ โ      โ โ      โ โ         โ  โ
โ  โโโโโโโโโโโโ โโโโโโโโโโ โโโโโโโโโโ โโโโโโโโ โโโโโโโโ โโโโโโโโโโโ  โ
โ       โฒ                                                             โ
โ       โ                                                             โ
โ      CPU                                                            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ะะตะณะธัััั**ยโ ะบัะพัะตัะฝะฐั ัะฒะตััะฑััััะฐั ะฟะฐะผััั ะฒะฝัััะธ ัะฐะผะพะณะพ ะฟัะพัะตััะพัะฐ. ะั ะฝะตะผะฝะพะณะพ (ะตะดะธะฝะธัั-ะดะตัััะบะธ), ะบะฐะถะดัะน ััะฐะฝะธั ะพะดะฝะพ ะทะฝะฐัะตะฝะธะต (ะพะฑััะฝะพ 64 ะฑะธัะฐ). ะัะพัะตััะพั ะฒัะฟะพะปะฝัะตั ะพะฟะตัะฐัะธะธ ะธะผะตะฝะฝะพ ะฝะฐะด ัะตะณะธัััะฐะผะธ โ ัะบะปะฐะดัะฒะฐะตั, ััะฐะฒะฝะธะฒะฐะตั, ัะดะฒะธะณะฐะตั.

**L1 ะบัั**ยโ ัะฐะผัะน ะฑัััััะน ะบัั, ะพะฑััะฝะพ 32โ64 ะะ ะฝะฐ ัะดัะพ. ะะฐะทะดะตะปัะฝ ะฝะฐ ะบัั ะธะฝััััะบัะธะน (L1i) ะธ ะบัั ะดะฐะฝะฝัั (L1d). ะะฐะดะตัะถะบะฐ โ ะพะบะพะปะพ 4 ัะฐะบัะพะฒ.

**L2 ะบัั**ยโ ะฟะพะฑะพะปััะต (256 ะะ โ 1 ะะ ะฝะฐ ัะดัะพ), ะฝะพ ะฒ 3โ4 ัะฐะทะฐ ะผะตะดะปะตะฝะฝะตะต L1. ะะฐะดะตัะถะบะฐ โ 10โ14 ัะฐะบัะพะฒ.

**L3 ะบัั**ยโ ัะฐะทะดะตะปัะตััั ะผะตะถะดั ัะดัะฐะผะธ, ะฝะตัะบะพะปัะบะพ ะผะตะณะฐะฑะฐะนั. ะะฐะดะตัะถะบะฐ โ ะพะบะพะปะพ 40 ัะฐะบัะพะฒ.

ะะฐะทะฝะธัะฐ ะผะตะถะดั L1 ะธ L2 ะผะพะถะตั ะฟะพะบะฐะทะฐัััั ะฝะตะทะฝะฐัะธัะตะปัะฝะพะน โ ะฝะพ ะบะพะณะดะฐ ะฟัะพัะตััะพั ะฒัะฟะพะปะฝัะตั ะผะธะปะปะธะฐัะดั ะพะฟะตัะฐัะธะน ะฒ ัะตะบัะฝะดั, ยซ4 ัะฐะบัะฐ ะฒะผะตััะพ 14ยป โ ััะพ ัะฐะทะฝะธัะฐ ะผะตะถะดั ยซะดะฐะฝะฝัะต ัะถะต ะทะดะตััยป ะธ ยซะฟัะธะดัััั ะฟะพะดะพะถะดะฐััยป. ะ ะฟัะธ ะฟัะพะผะฐัะต ะผะธะผะพ ะฒัะตั ััะพะฒะฝะตะน ะบััะฐ (cache miss) ะธ ะพะฑัะฐัะตะฝะธะธ ะบ RAM โ ััะพ ัะถะต ~200 ัะฐะบัะพะฒ.ย**ะะฐะถะดัะน ััะพะฒะตะฝั ะธะตัะฐััะธะธ โ ะบัะฐัะฝะพ ะดะพัะพะถะต ะฟัะตะดัะดััะตะณะพ.**

**RAM (Random Access Memory)**ยโ ะพะฟะตัะฐัะธะฒะฝะฐั ะฟะฐะผััั, ะพัะฝะพะฒะฝะพะต ัะฐะฑะพัะตะต ะฟัะพัััะฐะฝััะฒะพ. ะััััะฐั ะฟะพ ะผะตัะบะฐะผ ะดะธัะบะฐ, ะฝะพ ะฒ ัะพัะฝะธ ัะฐะท ะผะตะดะปะตะฝะฝะตะต ะบััะฐ. ะญะฝะตัะณะพะทะฐะฒะธัะธะผะฐั: ะฒัะบะปััะธะปะธ ะฟะธัะฐะฝะธะต โ ะฒัั ะธััะตะทะปะพ.

**HDD/SSD**ยโ ะดะธัะบ, ะดะพะปะณะพะฒัะตะผะตะฝะฝะพะต ััะฐะฝะธะปะธัะต. HDD ะธ SSD ััััะพะตะฝั ะฟัะธะฝัะธะฟะธะฐะปัะฝะพ ะฟะพ-ัะฐะทะฝะพะผั (ะผะฐะณะฝะธัะฝัะต ะฟะปะฐััะธะฝั vs ัะปะตั-ะฟะฐะผััั), ะฝะพ ะดะปั ะฝะฐัะตะน ะผะพะดะตะปะธ ะฒะฐะถะฝะพ ะพะดะฝะพ: ะพะฑะฐ ะฝะฐ ะฟะพััะดะบะธ ะผะตะดะปะตะฝะฝะตะต RAM. ะะฐัะพ ัะฝะตัะณะพะฝะตะทะฐะฒะธัะธะผั: ะดะฐะฝะฝัะต ะฟะตัะตะถะธะฒะฐัั ะฟะตัะตะทะฐะณััะทะบั.

**ะะปััะตะฒะพะต ะฟัะฐะฒะธะปะพ.**ยะงัะพะฑั ะฟัะพัะตััะพั ะผะพะณ ัะฐะฑะพัะฐัั ั ะดะฐะฝะฝัะผะธ, ะพะฝะธ ะดะพะปะถะฝั ะฟัะพะนัะธ ะฟััั: ะดะธัะบ โ RAM โ ะบัั โ ัะตะณะธััั. ะัะพะณัะฐะผะผะฐ ะฝะฐ ะดะธัะบะต โ ััะพ ะฟัะพััะพ ัะฐะนะป. ะะฟะตัะฐัะธะพะฝะฝะฐั ัะธััะตะผะฐ ะทะฐะณััะถะฐะตั ะตั ะฒ RAM, ะฟัะพัะตััะพั ะฟะพะดััะณะธะฒะฐะตั ะฝัะถะฝัะต ะบััะบะธ ะฒ ะบัั ะธ ัะตะณะธัััั โ ะธ ัะพะปัะบะพ ัะพะณะดะฐ ะฝะฐัะธะฝะฐะตั ะฒัะฟะพะปะฝััั ะธะฝััััะบัะธะธ.

### 1.2. ะะฝะฐะปะพะณะธั ยซะััะฝัยป

|ะะพะผะฟะพะฝะตะฝั|ะะฝะฐะปะพะณะธั|ะะพะปั|
|---|---|---|
|CPU|ะะพะฒะฐั|ะัะฟะพะปะฝัะตั ะดะตะนััะฒะธั: ัะตะถะตั, ะถะฐัะธั, ัะผะตัะธะฒะฐะตั|
|L1 ะบัั|ะะพะถ ะฒ ััะบะต|ะขะพ, ัะตะผ ัะฐะฑะพัะฐะตั ะฟััะผะพ ัะตะนัะฐั|
|L2 ะบัั|ะะฐะทะดะตะปะพัะฝะฐั ะดะพัะบะฐ ะฟะตัะตะด ะฟะพะฒะฐัะพะผ|ะขะพ, ััะพ ะฒ ะฝะตะฟะพััะตะดััะฒะตะฝะฝะพะน ะดะพััะณะฐะตะผะพััะธ|
|L3 ะบัั|ะะปะธะถะฝะธะน ะบัะฐะน ััะพะปะฐ|ะัะถะฝะพ ัััั ะฟะพััะฝััััั|
|RAM|ะะฑัะธะน ัะฐะฑะพัะธะน ััะพะป|ะัะพะดัะบัั, ัะฐะทะปะพะถะตะฝะฝัะต ะดะปั ะณะพัะพะฒะบะธ|
|ะะธัะบ|ะะปะฐะดะพะฒะฐั|ะะฐะฟะฐัั, ะบะพัะพััะต ะถะดัั ัะฒะพะตะน ะพัะตัะตะดะธ|

**ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั.**ยะะพะฒะฐั (CPU) ะฝะต ะฑะตะณะฐะตั ะฒ ะบะปะฐะดะพะฒัั (ะดะธัะบ) ะทะฐ ะบะฐะถะดะพะน ัะตะฟะพัะบะพะน ัะพะปะธ. ะัะถะฝัะต ะฟัะพะดัะบัั ะฒัะปะพะถะตะฝั ะฝะฐ ะพะฑัะธะน ััะพะป (RAM). ะะพ ะดะฐะถะต ะบ ััะพะปั ะฟะพะฒะฐั ะฝะต ััะฝะตััั ะทะฐ ะบะฐะถะดัะผ ะบััะพัะบะพะผ ะปัะบะฐ โ ะพะฝ ะฑะตััั ัะตะปัั ะปัะบะพะฒะธัั, ะบะปะฐะดัั ะฝะฐ ัะฐะทะดะตะปะพัะฝัั ะดะพัะบั (L2 ะบัั), ะพััะตะทะฐะตั ะบััะพะบ ะธ ะดะตัะถะธั ะฒ ััะบะต (L1). ะะพะบะฐ ะปัะบ ััะดะพะผ โ ัะฐะฑะพัะฐ ะปะตัะธั. ะะพ ะตัะปะธ ะฝัะถะตะฝ ะธะฝะณัะตะดะธะตะฝั, ะบะพัะพัะพะณะพ ะฝะตั ะฝะธ ะฝะฐ ะดะพัะบะต, ะฝะธ ะฝะฐ ััะพะปะต โ ะฟัะธัะพะดะธััั ะธะดัะธ ะฒ ะบะปะฐะดะพะฒัั. ะ ะฒัั ัะพัะผะพะทะธั.

ะะผะตะฝะฝะพ ะฟะพััะพะผัย**ะผะฐััะธะฒ ะฑััััะตะต ัะฒัะทะฝะพะณะพ ัะฟะธัะบะฐ**ยะฟัะธ ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพะผ ะพะฑัะพะดะต: ัะปะตะผะตะฝัั ะผะฐััะธะฒะฐ ะปะตะถะฐั ะฒ ะฟะฐะผััะธ ััะดะพะผ, ะธ ะบะพะณะดะฐ ะฟัะพัะตััะพั ะฟะพะดััะณะธะฒะฐะตั ะพะดะธะฝ ัะปะตะผะตะฝั ะฒ ะบัั, ัะพัะตะดะฝะธะต ะฟัะธะตะทะถะฐัั ะฒะผะตััะต ั ะฝะธะผ (ะฟะพะฟะฐะดะฐัั ยซะฝะฐ ะดะพัะบัยป ะพะดะฝะพะน ะฟะฐััะธะตะน). ะญะปะตะผะตะฝัั ัะฒัะทะฝะพะณะพ ัะฟะธัะบะฐ ัะฐะทะฑัะพัะฐะฝั ะฟะพ ะฟะฐะผััะธ โ ะทะฐ ะบะฐะถะดัะผ ะฟัะธัะพะดะธััั ยซะฑะตะถะฐัั ะบ ััะพะปัยป ะทะฐะฝะพะฒะพ.

**ะะดะต ะฐะฝะฐะปะพะณะธั ะปะพะผะฐะตััั:**

- RAM ะพัะธัะฐะตััั ะฟัะธ ะฒัะบะปััะตะฝะธะธ, ััะพะป โ ะฝะตั.
- CPU ะฝะต ะธะผะฟัะพะฒะธะทะธััะตั: ะฟะพะฒะฐั ะผะพะถะตั ะฟะพะฟัะพะฑะพะฒะฐัั ะฑะปัะดะพ ะธ ะดะพะฑะฐะฒะธัั ัะพะปะธ, ะฟัะพัะตััะพั ัััะพะณะพ ัะปะตะดัะตั ะธะฝััััะบัะธัะผ.
- ะัั ัะฐะฑะพัะฐะตั ะฐะฒัะพะผะฐัะธัะตัะบะธ (ะฐะฟะฟะฐัะฐัะฝะพ), ะฐ ะฟะพะฒะฐั ัะฐะผ ัะตัะฐะตั, ััะพ ะฟะพะปะพะถะธัั ะฝะฐ ะดะพัะบั.

### 1.3. ะฆะธะบะป ัะฐะฑะพัั ะฟัะพัะตััะพัะฐ: Fetch โ Decode โ Execute

ะัั, ััะพ ะดะตะปะฐะตั ะฟัะพัะตััะพั, ัะฒะพะดะธััั ะบ ะฑะตัะบะพะฝะตัะฝะพะผั ะฟะพะฒัะพัะตะฝะธั ัััั ัะฐะณะพะฒ:

text

```
         โโโโโโโโโโโโ
         โ  FETCH   โ  ะะทััั ะธะฝััััะบัะธั ะธะท ะฟะฐะผััะธ
         โ          โ  (ะฟะพ ะฐะดัะตัั ะฒ Program Counter)
         โโโโโโฌโโโโโโ
              โ
              โผ
         โโโโโโโโโโโโ
         โ  DECODE  โ  ะะพะฝััั, ััะพ ััะพ ะทะฐ ะธะฝััััะบัะธั
         โ          โ  (ัะปะพะถะธัั? ััะฐะฒะฝะธัั? ะฟะตัะตะนัะธ?)
         โโโโโโฌโโโโโโ
              โ
              โผ
         โโโโโโโโโโโโ
         โ EXECUTE  โ  ะัะฟะพะปะฝะธัั ะพะฟะตัะฐัะธั
         โ          โ
         โโโโโโฌโโโโโโ
              โ
              โโโโโโโโบ ะฟะพะฒัะพัะธัั
```

1. **Fetch (ะธะทะฒะปะตัั).**ยะัะพัะตััะพั ัะผะพััะธั ะฝะฐ Program Counter (PC) โ ัะฟะตัะธะฐะปัะฝัะน ัะตะณะธััั ั ะฐะดัะตัะพะผ ัะปะตะดัััะตะน ะธะฝััััะบัะธะธ. ะะดัั ะฟะพ ััะพะผั ะฐะดัะตัั ะธ ะทะฐะฑะธัะฐะตั ะธะฝััััะบัะธั.
2. **Decode (ะดะตะบะพะดะธัะพะฒะฐัั).**ยะะฟัะตะดะตะปัะตั, ััะพ ะฝัะถะฝะพ ัะดะตะปะฐัั.ย`ADD A, B`ยโ ัะปะพะถะธัั ะทะฝะฐัะตะฝะธั ะฒ ัะตะณะธัััะฐั A ะธ B.ย`JMP 200`ยโ ะฟะตัะตะนัะธ ะบ ะฐะดัะตัั 200.
3. **Execute (ะฒัะฟะพะปะฝะธัั).**ยะะตะปะฐะตั ัะพ, ััะพ ะฝะฐะฟะธัะฐะฝะพ: ัะบะปะฐะดัะฒะฐะตั, ััะฐะฒะฝะธะฒะฐะตั, ะทะฐะฟะธััะฒะฐะตั ัะตะทัะปััะฐั, ัะดะฒะธะณะฐะตั Program Counter.

**ะะฐะถะฝะฐั ะพะณะพะฒะพัะบะฐ.**ยะะฟะธัะฐะฝะฝะฐั ะผะพะดะตะปั โ ัะฟัะพัะตะฝะธะต. ะกะพะฒัะตะผะตะฝะฝัะต ะฟัะพัะตััะพัั ััะฟะตััะบะฐะปััะฝัะต: ะพะฝะธ ัะผะตัั ะฒัะฟะพะปะฝััั ะฝะตัะบะพะปัะบะพ ะธะฝััััะบัะธะน ะทะฐ ะพะดะธะฝ ัะฐะบั (IPC โ Instructions Per Cycle โ ัะฐััะพ ะฑะพะปััะต 1). ะะฝะธ ะธัะฟะพะปัะทััั ะบะพะฝะฒะตะนะตัั (pipeline), ะฒะฝะตะพัะตัะตะดะฝะพะต ะธัะฟะพะปะฝะตะฝะธะต (Out-of-Order Execution) ะธ ะฟัะตะดัะบะฐะทะฐะฝะธะต ะฒะตัะฒะปะตะฝะธะน. ะัะพัะตััะพั ั ัะฐััะพัะพะน 3 ะะั ะฒัะฟะพะปะฝัะตั ะฝะต ยซ3 ะผะธะปะปะธะฐัะดะฐ ะธะฝััััะบัะธะน ะฒ ัะตะบัะฝะดัยป, ะฐ ะทะฐัะฐัััั ะทะฝะฐัะธัะตะปัะฝะพ ะฑะพะปััะต. ะะพ ะผะพะดะตะปั Fetch โ Decode โ Execute ะพััะฐัััั ะบะพััะตะบัะฝะพะน ะผะตะฝัะฐะปัะฝะพะน ะพัะฝะพะฒะพะน โ ะบะฐะถะดะฐั ะธะฝััััะบัะธั ะบะพะฝัะตะฟััะฐะปัะฝะพ ะฟัะพัะพะดะธั ััะธ ััะฐะฟั.

### 1.4. ะัะพะผะตะถััะพัะฝัะน ะธัะพะณ

- ะะพะผะฟัััะตั โ ััะพ ะผะตัะฐะฝะธะทะผ ัย**ะธะตัะฐััะธะตะน ะฟะฐะผััะธ**. ะะฐะฝะฝัะต ะฟะพะดะฝะธะผะฐัััั ะพั ะดะธัะบะฐ ัะตัะตะท RAM ะฒ ะบัั ะธ ัะตะณะธัััั. ะะฐะถะดัะน ััะพะฒะตะฝั ะบัะฐัะฝะพ ะฑััััะตะต โ ะธ ะบัะฐัะฝะพ ะผะตะฝััะต.
- ะัะพัะตััะพั ะฒัะฟะพะปะฝัะตั ะฟัะพััะตะนัะธะต ะพะฟะตัะฐัะธะธ ะฝะฐะด ัะตะณะธัััะฐะผะธ โ ะฝะพ ะดะตะปะฐะตั ััะพ ั ะฝะตะฒะตัะพััะฝะพะน ัะบะพัะพัััั.
- ะัั, ััะพ ะดะตะปะฐะตั ะฟัะพะณัะฐะผะผะฐ โ ะพั ะพัะพะฑัะฐะถะตะฝะธั ะบะฝะพะฟะบะธ ะดะพ ะพะฑััะตะฝะธั ะฝะตะนัะพัะตัะธ โ ััะพ ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพััั ัะปะตะผะตะฝัะฐัะฝัั ัะฐะณะพะฒ Fetch โ Decode โ Execute.

ะะพ ััะพะฑั ะฟัะพัะตััะพั ะผะพะณ ััะพ-ัะพ ััะธัะฐัั, ะดะฐะฝะฝัะต ะฝัะถะฝะพ ะบะฐะบ-ัะพ ะฟัะตะดััะฐะฒะธัั. ะะฐะบ ะธะผะตะฝะฝะพ โ ะฒ ัะปะตะดัััะตะผ ัะฐะทะดะตะปะต.

---

## 2. ะะฐะฝะฝัะต: ะฑะธัั, ะฑะฐะนัั ะธ ะฟัะตะดััะฐะฒะปะตะฝะธะต ะธะฝัะพัะผะฐัะธะธ

### 2.1. ะะพัะตะผั ะบะพะผะฟัััะตั ยซะดัะผะฐะตัยป ะฝัะปัะผะธ ะธ ะตะดะธะฝะธัะฐะผะธ

ะัะฒะตั โ ะฒ ัะธะทะธะบะต. ะญะปะตะบััะพะฝะฝัะต ััะตะผั ัะฐะฑะพัะฐัั ะฝะฐ ััะฐะฝะทะธััะพัะฐั, ะธ ัะฐะผัะน ะฝะฐะดัะถะฝัะน ัะฟะพัะพะฑ ัะฐะทะปะธัะฐัั ัะพััะพัะฝะธั โ ััะพย**ะดะฒะฐ ััะพะฒะฝั ะฝะฐะฟััะถะตะฝะธั**:

- **ะััะพะบะพะต ะฝะฐะฟััะถะตะฝะธะต โ 1**
- **ะะธะทะบะพะต ะฝะฐะฟััะถะตะฝะธะต โ 0**

ะะพะถะฝะพ ะปะธ ัะฐะทะปะธัะฐัั ััะธ ัะพััะพัะฝะธั? ะะตัััั? ะขะตะพัะตัะธัะตัะบะธ ะดะฐ. ะะพ ัะตะผ ะฑะพะปััะต ัะพััะพัะฝะธะน, ัะตะผ ัะปะพะถะฝะตะต ะธั ะพัะปะธัะธัั: ัะธะณะฝะฐะป ะทะฐััะผะปัะฝ, ะฝะฐะฟััะถะตะฝะธะต ยซะฟะปะฐะฒะฐะตัยป. ะะฒะฐ ัะพััะพัะฝะธั โ ะผะฐะบัะธะผะฐะปัะฝะพ ะฟะพะผะตัะพัััะพะนัะธะฒัะน ะฒะฐัะธะฐะฝั. ะะพััะพะผั ะฒัั ะฒััะธัะปะธัะตะปัะฝะฐั ัะตัะฝะธะบะฐ ัะถะต 70+ ะปะตั ัััะพะธััั ะฝะฐ ะดะฒะพะธัะฝะพะน ัะธััะตะผะต.

**ะัะฐะฝั ะดะปั ะปัะฑะพะฟััะฝัั.**ยยซะะพะปัยป โ ััะพ ะฝะต ะธะดะตะฐะปัะฝัะต 0 ะฒะพะปัั, ะฐ ะดะธะฐะฟะฐะทะพะฝ, ัะบะฐะถะตะผ, ะพั 0 ะดะพ 0.8 ะ. ยซะะดะธะฝะธัะฐยป โ ะพั 2.0 ะดะพ 3.3 ะ. ะะตะถะดั ะฝะธะผะธ โ ยซะทะฐะฟัะตัะฝะฐั ะทะพะฝะฐยป, ะบัะดะฐ ัะธะณะฝะฐะป ะฝะต ะดะพะปะถะตะฝ ะฟะพะฟะฐะดะฐัั. ะขัะฐะฝะทะธััะพั โ ะฝะต ะผะตัะฐะฝะธัะตัะบะธะน ััะผะฑะปะตั, ะฐ ะฟะพะปัะฟัะพะฒะพะดะฝะธะบะพะฒัะน ัะปะตะผะตะฝั ัะฐะทะผะตัะพะผ ะฒ ะฝะตัะบะพะปัะบะพ ะฝะฐะฝะพะผะตััะพะฒ.

### 2.2. ะะธั ะธ ะฑะฐะนั

**ะะธั**ย(bit, binary digit) โ ะผะธะฝะธะผะฐะปัะฝะฐั ะตะดะธะฝะธัะฐ ะธะฝัะพัะผะฐัะธะธ: 0 ะธะปะธ 1.

**ะะฐะนั**ย(byte) โ ะณััะฟะฟะฐ ะธะท 8 ะฑะธั. ะญัะพ ะฑะฐะทะพะฒะฐั ะตะดะธะฝะธัะฐ, ั ะบะพัะพัะพะน ัะฐะฑะพัะฐะตั ะฟะฐะผััั.

ะกะบะพะปัะบะพ ัะฝะธะบะฐะปัะฝัั ะบะพะผะฑะธะฝะฐัะธะน ะผะพะถะฝะพ ัะพััะฐะฒะธัั ะธะท 8 ะฑะธั?

text

```
2 ร 2 ร 2 ร 2 ร 2 ร 2 ร 2 ร 2 = 2โธ = 256
```

ะะดะธะฝ ะฑะฐะนั ะผะพะถะตั ะฟัะตะดััะฐะฒะปััั 256 ัะฐะทะปะธัะฝัั ะทะฝะฐัะตะฝะธะน โ ะฝะฐะฟัะธะผะตั, ัะธัะปะฐ ะพั 0 ะดะพ 255.

**ะะฝััะธัะธั ะพ ะผะฐัััะฐะฑะต**ยโ ัะพ, ััะพ ะดะตะนััะฒะธัะตะปัะฝะพ ะฒะฐะถะฝะพ ะฟะพะฝะธะผะฐัั:

|ะะพะปะธัะตััะฒะพ ะฑะธั|ะะพะปะธัะตััะฒะพ ะทะฝะฐัะตะฝะธะน|ะัะธะผะตั ะธัะฟะพะปัะทะพะฒะฐะฝะธั|
|---|---|---|
|8|256|`byte`ยะฒ Java (โ128โฆ127)|
|16|65 536|`short`,ย`char`ยะฒ Java|
|32|~4.3 ะผะธะปะปะธะฐัะดะฐ|`int`ยะฒ Java (ยฑ2.1 ะผะปัะด)|
|64|~18.4 ะบะฒะธะฝัะธะปะปะธะพะฝะฐ|`long`ยะฒ Java|

**ะะฐะบ Java ััะฐะฝะธั ะพััะธัะฐัะตะปัะฝัะต ัะธัะปะฐ: ะดะพะฟะพะปะฝะธัะตะปัะฝัะน ะบะพะด (two's complement).**

ะั ะผะพะณะปะธ ะฟะพะดัะผะฐัั, ััะพ ะพะดะธะฝ ะฑะธั ะฟัะพััะพ ยซะพัะฒะตัะฐะตั ะทะฐ ะทะฝะฐะบยป, ะบะฐะบ ะผะธะฝัั ะฟะตัะตะด ัะธัะปะพะผ ะฝะฐ ะฑัะผะฐะณะต. ะขะฐะบะฐั ัะธััะตะผะฐ ัััะตััะฒัะตั (sign-magnitude), ะฝะพ Java ะธัะฟะพะปัะทัะตั ะดััะณะพะน ะฟะพะดัะพะด โย**ะดะพะฟะพะปะฝะธัะตะปัะฝัะน ะบะพะด**.

ะ ะดะพะฟะพะปะฝะธัะตะปัะฝะพะผ ะบะพะดะต ััะฐััะธะน ะฑะธั ะฒะปะธัะตั ะฝะฐ ะทะฝะฐะบ, ะฝะพ ััะพย**ะฝะต ะฟัะพััะพ ยซัะปะฐะณยป**. ะััะธัะฐัะตะปัะฝัะต ัะธัะปะฐ ะฟัะตะดััะฐะฒะปััััั ะธะฝะฐัะต:

- `+1`ยโย`00000000 00000000 00000000 00000001`
- `-1`ยโย`11111111 11111111 11111111 11111111`ย(ะฒัะต ะตะดะธะฝะธัั โ ััะพย`0xFFFFFFFF`)
- `Integer.MIN_VALUE`ย(-2 147 483 648) โย`10000000 00000000 00000000 00000000`
- `Integer.MAX_VALUE`ย(+2 147 483 647) โย`01111111 11111111 11111111 11111111`

ะญัะพ ะพะฑัััะฝัะตั ััะธ ะฒะตัะธ, ะบะพัะพััะต ะธะฝะฐัะต ะฒัะณะปัะดัั ะผะฐะณะธะตะน:

1. **ะัะธะผะผะตััะธัะฝัะน ะดะธะฐะฟะฐะทะพะฝ.**ยะฃย`int`ยะพััะธัะฐัะตะปัะฝัั ะทะฝะฐัะตะฝะธะน ะฝะฐ ะพะดะฝะพ ะฑะพะปััะต, ัะตะผ ะฟะพะปะพะถะธัะตะปัะฝัั: ะพั โ2 147 483 648 ะดะพ +2 147 483 647. ะัะปั ะทะฐะฝะธะผะฐะตั ยซะผะตััะพยป ะฒ ะฟะพะปะพะถะธัะตะปัะฝะพะน ะฟะพะปะพะฒะธะฝะต.
    
2. **`Math.abs(Integer.MIN_VALUE)`ยะฒะพะทะฒัะฐัะฐะตั... ะพััะธัะฐัะตะปัะฝะพะต ัะธัะปะพ.**ยะะพัะพะผั ััะพ +2 147 483 648 ะฝะต ะฟะพะผะตัะฐะตััั ะฒย`int`. ะะธัั ยซะฟัะพะบัััะธะฒะฐััััยป, ะธ ัะตะทัะปััะฐั โ ัะฝะพะฒะฐย`Integer.MIN_VALUE`.
    
3. **ะะตัะตะฟะพะปะฝะตะฝะธะต ะฟัะธย`Integer.MAX_VALUE + 1`.**ยะะตะทัะปััะฐั โย`Integer.MIN_VALUE`. ะะต ะธัะบะปััะตะฝะธะต, ะฝะต ะพัะธะฑะบะฐ ะบะพะผะฟะธะปััะธะธ โ ัะธัะพะต ยซะฟัะพะบัััะธะฒะฐะฝะธะตยป ะฑะธัะพะฒ, ะบะฐะบ ะพะดะพะผะตัั ะฒ ะผะฐัะธะฝะต.
    

> ๐ย**ะกะฝะพัะบะฐ:ย`boolean`ยโ ะฝะต 1 ะฑะธั.**ยะฅะพัั ะปะพะณะธัะตัะบะธย`boolean`ยััะฐะฝะธั ะพะดะธะฝ ะฑะธั ะธะฝัะพัะผะฐัะธะธ (`true`/`false`), ะฒ JVM ะพะฝ ะทะฐะฝะธะผะฐะตั ะผะธะฝะธะผัะผย**1 ะฑะฐะนั**. ะ ะผะฐััะธะฒะตย`boolean[]`ยโ ัะพะถะต ะฟะพ ะฑะฐะนัั ะฝะฐ ัะปะตะผะตะฝั. ะญัะพ ัะพัะพัะธะน ะฟัะธะผะตั ยซััะตัะบะธ ะฐะฑัััะฐะบัะธะธยป: ะปะพะณะธัะตัะบะธะน ัะฐะทะผะตั ะธ ัะธะทะธัะตัะบะธะน โ ัะฐะทะฝัะต ะฒะตัะธ.

### 2.3. ะะฒะพะธัะฝะฐั ะธ ัะตััะฝะฐะดัะฐัะตัะธัะฝะฐั ัะธััะตะผั

#### ะะฒะพะธัะฝะฐั โ ะฟัะธะฝัะธะฟ

ะ ะดะตัััะธัะฝะพะน ัะธััะตะผะต ะบะฐะถะดะฐั ะฟะพะทะธัะธั โ ััะตะฟะตะฝั ะดะตัััะบะธ:ย`375 = 3ร100 + 7ร10 + 5ร1`. ะ ะดะฒะพะธัะฝะพะน โ ัะพ ะถะต ัะฐะผะพะต, ะฝะพ ัะพ ััะตะฟะตะฝัะผะธ ะดะฒะพะนะบะธ:

text

```
ะัะธะผะตั: ัะธัะปะพ 42

ะะพะทะธัะธั: 32  16   8   4   2   1
ะะธั:      1   0   1   0   1   0
ะกัะธัะฐะตะผ: 32 +    8  +    2     = 42

ะ ะฒะธะดะต ะฟะพะปะฝะพะณะพ ะฑะฐะนัะฐ: 00101010
```

ะะฐะผ ะฝะต ะฝัะถะฝะพ ะฟะตัะตะฒะพะดะธัั ัะธัะปะฐ ะฝะฐ ะฑัะผะฐะถะบะต โ ะดะปั ััะพะณะพ ะตัััย`Integer.toBinaryString(42)`. ะะพ ะฟะพะฝะธะผะฐะฝะธะต ะฟัะธะฝัะธะฟะฐ ะฟะพะผะพะณะฐะตั ะพัะพะทะฝะฐัั, ะฟะพัะตะผั ัะธัะปะฐ ะธะผะตัั ัะต ะณัะฐะฝะธัั, ะบะพัะพััะต ะธะผะตัั, ะธ ััะพ ะฟัะพะธััะพะดะธั ะฟัะธ ะฟะพะฑะธัะพะฒัั ะพะฟะตัะฐัะธัั (`&`,ย`|`,ย`^`,ย`<<`).

#### ะจะตััะฝะฐะดัะฐัะตัะธัะฝะฐั โ ัะพ, ััะพ ะฒั ัะตะฐะปัะฝะพ ะฒัััะตัะธัะต

ะ ะปะพะณะฐั, ะดะฐะผะฟะฐั ะฟะฐะผััะธ ะธ ัะพะพะฑัะตะฝะธัั ะพะฑ ะพัะธะฑะบะฐั ะฒั ะฟะพััะพัะฝะฝะพ ะฒะธะดะธัะต ะฐะดัะตัะฐ ะฒัะพะดะตย`0x7F3A00C8`. ะญัะพ ัะตััะฝะฐะดัะฐัะตัะธัะฝะฐั (hex) ะทะฐะฟะธัั.

ะะฐัะตะผ ะพะฝะฐ ะฝัะถะฝะฐ? ะะฒะพะธัะฝะฐั ะทะฐะฟะธัั ัะปะธัะบะพะผ ะดะปะธะฝะฝะฐั: ัะธัะปะพ 255 โ ััะพย`11111111`ยะฒ ะดะฒะพะธัะฝะพะน (8 ัะธะผะฒะพะปะพะฒ), ะฝะพ ะฒัะตะณะพย`FF`ยะฒ hex (2 ัะธะผะฒะพะปะฐ). ะะฐะถะดะฐั hex-ัะธััะฐ โ ััะพ ัะพะฒะฝะพ 4 ะฑะธัะฐ, ะฟะพััะพะผั ะฟะตัะตะฒะพะด ะผะตะถะดั ะดะฒะพะธัะฝะพะน ะธ hex ััะธะฒะธะฐะปะตะฝ:

text

```
Hex:     0  1  2  ... 9  A   B   C   D   E   F
ะะตััั.:  0  1  2  ... 9  10  11  12  13  14  15

ะัะธะผะตั: 0xFF = 15ร16 + 15 = 255 = 11111111 ะฒ ะดะฒะพะธัะฝะพะน
ะัะธะผะตั: 0x2A = 2ร16 + 10  = 42
```

**ะะดะต ะฒั ััะพ ะฒัััะตัะธัะต:**ยะฐะดัะตัะฐ ะฒย`StackOverflowError`, ะดะฐะผะฟั ัะธะฟ-ะฟะฐะผััะธ (`jmap`), ัะฒะตัะฐ ะฒ CSS (`#FF5733`), ะพัะปะฐะดะพัะฝัะต ะปะพะณะธ JVM.

> ๐ย**ะกะฝะพัะบะฐ: ะฟะพััะดะพะบ ะฑะฐะนัะพะฒ (endianness).**ยะัะปะธ ะฒั ะบะพะณะดะฐ-ะฝะธะฑัะดั ะฑัะดะตัะต ัะผะพััะตัั ะดะฐะผะฟ ะฟะฐะผััะธ, ัััะธัะต: x86-ะฟัะพัะตััะพัั ะธัะฟะพะปัะทััั little-endian ะฟะพััะดะพะบ. ะงะธัะปะพย`0x0A0B0C0D`ยะฒ ะฟะฐะผััะธ ะฑัะดะตั ะปะตะถะฐัั ะบะฐะบย`0D 0C 0B 0A`ยโ ะผะปะฐะดัะธะน ะฑะฐะนั ะฟะพ ะผะปะฐะดัะตะผั ะฐะดัะตัั. JVM ะฐะฑัััะฐะณะธััะตั ััะพ ะพั Java-ะบะพะดะฐ, ะฝะพ ะฟัะธ ัะฐะฑะพัะต ัย`ByteBuffer`ยะธะปะธ ัะตัะตะฒัะผะธ ะฟัะพัะพะบะพะปะฐะผะธ (network byte order = big-endian) ััะพ ััะฐะฝะพะฒะธััั ะฒะฐะถะฝัะผ.

### 2.4. ะขะตะบัั ะบะฐะบ ัะธัะปะฐ

ะะพะผะฟัััะตั ะฝะต ะทะฝะฐะตั, ััะพ ัะฐะบะพะต ะฑัะบะฒะฐ ยซAยป ะธะปะธ ัะธะผะฒะพะป ยซะยป. ะะฝ ััะฐะฝะธั ัะพะปัะบะพ ัะธัะปะฐ. ะัะดะธ ะดะพะณะพะฒะพัะธะปะธัั ะพ ัะฐะฑะปะธัะฐั ัะพะพัะฒะตัััะฒะธั: ะบะฐะถะดะพะผั ัะธะผะฒะพะปั โ ัะฒะพะน ัะธัะปะพะฒะพะน ะบะพะด.

- **ASCII**ยโ 128 ัะธะผะฒะพะปะพะฒ: ะปะฐัะธะฝะธัะฐ, ัะธััั, ะทะฝะฐะบะธ ะฟัะตะฟะธะฝะฐะฝะธั.ย`'A'`ยโ 65,ย`'0'`ยโ 48.
- **Unicode**ยโ ัะพะฒัะตะผะตะฝะฝัะน ััะฐะฝะดะฐัั: ะฒัะต ัะธะผะฒะพะปั ะผะธัะฐ, ะฒะบะปััะฐั ะบะธัะธะปะปะธัั, ะธะตัะพะณะปะธัั ะธ ัะผะพะดะทะธ.ย`'ะ'`ยโ U+0416 (ะบะพะด 1046),ย`'๐'`ยโ U+1F642.
- **UTF-8**ยะธย**UTF-16**ยโ ัะฟะพัะพะฑั ัะฟะฐะบะพะฒะบะธ ะบะพะดะพะฒ Unicode ะฒ ะฑะฐะนัั.

ะ Javaย`char`ยโ ััะพ UTF-16, 2 ะฑะฐะนัะฐ. ะญัะพะณะพ ัะฒะฐัะฐะตั ะดะปั ะฑะพะปััะธะฝััะฒะฐ ัะธะผะฒะพะปะพะฒ, ะฝะพ ะฝะตะบะพัะพััะต (ะฝะฐะฟัะธะผะตั, ัะผะพะดะทะธ) ััะตะฑัััย**ััััะพะณะฐัะฝะพะน ะฟะฐัั**ยโ ะดะฒััย`char`.

**ะะปะฐะฒะฝะพะต.**ยะะดะธะฝ ัะธะผะฒะพะป โ ะพะดะธะฝ ะฑะฐะนั. ะัะปะธ ะฟะตัะตะฟััะฐัั ะบะพะดะธัะพะฒะบั ะฟัะธ ััะตะฝะธะธ ัะฐะนะปะฐ โ ะฒะผะตััะพ ัะตะบััะฐ ัะฒะธะดะธัะต ะบัะฐะบะพะทัะฑัั: ะบะพะผะฟัััะตั ัะฐะทะฑะธะป ัั ะถะต ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพััั ะฑะฐะนัะพะฒ ะฝะฐ ัะธะผะฒะพะปั ะฟะพ ะดััะณะธะผ ะฟัะฐะฒะธะปะฐะผ.

### 2.5. ะัะพะผะตะถััะพัะฝัะน ะธัะพะณ

- ะัะฑัะต ะดะฐะฝะฝัะต โ ัะธัะปะฐ, ัะตะบัั, ะบะฐััะธะฝะบะธ, ะฒะธะดะตะพ โ ััะพ ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพััะธ ะฑะธั. ะะพะผะฟัััะตั ะฝะต ยซะฟะพะฝะธะผะฐะตัยป ัะผััะป โ ะพะฝ ะพะฟะตัะธััะตั ัะธัะปะฐะผะธ. ะกะผััะป ะฟัะธะดะฐัะผ ะผั, ัะตัะตะท ัะพะณะปะฐัะตะฝะธั ะธ ะบะพะดะธัะพะฒะบะธ.
- Java ััะฐะฝะธั ัะตะปัะต ัะธัะปะฐ ะฒ ะดะพะฟะพะปะฝะธัะตะปัะฝะพะผ ะบะพะดะต (two's complement). ะญัะพ ะพะฑัััะฝัะตั ะฐัะธะผะผะตััะธัะฝัะน ะดะธะฐะฟะฐะทะพะฝย`int`, ะฟะพะฒะตะดะตะฝะธะต ะฟัะธ ะฟะตัะตะฟะพะปะฝะตะฝะธะธ ะธ ะปะพะฒััะบั ัย`Math.abs(Integer.MIN_VALUE)`.
- ะะฐะทะผะตั ัะธะฟะฐ ะดะฐะฝะฝัั (8, 16, 32, 64 ะฑะธัะฐ) ะฝะฐะฟััะผัั ะพะฟัะตะดะตะปัะตั ะดะธะฐะฟะฐะทะพะฝ ะทะฝะฐัะตะฝะธะน โ ะธ ััะพ ะฝะต ะฐะฑัััะฐะบัะฝะฐั ะผะฐัะตะผะฐัะธะบะฐ, ะฐ ะฟัะธัะธะฝะฐ ัะตะฐะปัะฝัั ะฑะฐะณะพะฒ ะฟะตัะตะฟะพะปะฝะตะฝะธั.

ะขะตะฟะตัั ะผั ะทะฝะฐะตะผ, ะบะฐะบ ะฟัะพัะตััะพั ัะฐะฑะพัะฐะตั ะธ ะบะฐะบ ะฟัะตะดััะฐะฒะปะตะฝั ะดะฐะฝะฝัะต. ะกะปะตะดัััะธะน ะฒะพะฟัะพั: ะณะดะต ะธะผะตะฝะฝะพ ััะธ ะดะฐะฝะฝัะต ะถะธะฒัั, ะฟะพะบะฐ ะฟัะพะณัะฐะผะผะฐ ะฒัะฟะพะปะฝัะตััั? ะะดะตัั ะฝะฐ ััะตะฝั ะฒััะพะดัั Stack ะธ Heap.

---

## 3. ะะฐะผััั ะฟัะพัะตััะฐ: Stack ะธ Heap

### 3.1. ะะธัััะฐะปัะฝะฐั ะฟะฐะผััั (ะฝะฐ ะฟะฐะปััะฐั)

ะะพะณะดะฐ ะฒั ะทะฐะฟััะบะฐะตัะต ะฟัะพะณัะฐะผะผั, ะพะฟะตัะฐัะธะพะฝะฝะฐั ัะธััะตะผะฐ ัะพะทะดะฐัั ะดะปั ะฝะตัย**ะฟัะพัะตัั**. ะะฐะถะดัะน ะฟัะพัะตัั ะฟะพะปััะฐะตั ะธะปะปัะทะธั: ะพะฝ ะพะดะธะฝ ะฒ ัะธััะตะผะต ะธ ะฒัั ะฟะฐะผััั ะฟัะธะฝะฐะดะปะตะถะธั ะตะผั.

ะญัะพ ะฝะฐะทัะฒะฐะตัััย**ะฒะธัััะฐะปัะฝะพะต ะฐะดัะตัะฝะพะต ะฟัะพัััะฐะฝััะฒะพ**. ะัะพัะตัั ัะฐะฑะพัะฐะตั ั ะฒะธัััะฐะปัะฝัะผะธ ะฐะดัะตัะฐะผะธ (`0x00000000`,ย`0x7FFF0A20`โฆ), ะฐ ะะก ะฝะตะทะฐะผะตัะฝะพ ะพัะพะฑัะฐะถะฐะตั ะธั ะฝะฐ ัะตะฐะปัะฝัะต ััะตะนะบะธ ัะธะทะธัะตัะบะพะน RAM.

text

```
  ะัะพัะตัั A                         ะคะธะทะธัะตัะบะฐั RAM
  โโโโโโโโโโโโโโโโ                 โโโโโโโโโโโโโโโโโโโโ
  โ 0x0000  โโโโโโโโโโโโโโโโโโโโโโบ โ ะฏัะตะนะบะฐ 0x3A00    โ
  โ 0x0004  โโโโโโโโโโโโโโโโโโโโโโบ โ ะฏัะตะนะบะฐ 0x8F10    โ
  โโโโโโโโโโโโโโโโ                 โโโโโโโโโโโโโโโโโโโโ

  ะัะพัะตัั B
  โโโโโโโโโโโโโโโโ                 โโโโโโโโโโโโโโโโโโโโ
  โ 0x0000  โโโโโโโโโโโโโโโโโโโโโโบ โ ะฏัะตะนะบะฐ 0x1200    โ
  โ 0x0004  โโโโโโโโโโโโโโโโโโโโโโบ โ ะฏัะตะนะบะฐ 0x5C44    โ
  โโโโโโโโโโโโโโโโ                 โโโโโโโโโโโโโโโโโโโโ
```

**ะะฐัะตะผ:**

- **ะะทะพะปััะธั.**ยะัะพัะตัั A ะฝะต ะผะพะถะตั ัะปััะฐะนะฝะพ ะฟัะพัะธัะฐัั ะดะฐะฝะฝัะต ะฟัะพัะตััะฐ B.
- **ะะตะทะพะฟะฐัะฝะพััั.**ยะะก ะบะพะฝััะพะปะธััะตั, ะบะฐะบะธะต ััะฐััะบะธ ะดะพัััะฟะฝั.
- **ะะธะฑะบะพััั.**ยะะพะถะฝะพ ะธัะฟะพะปัะทะพะฒะฐัั ะฑะพะปััะต ะฟะฐะผััะธ, ัะตะผ ะตััั ัะธะทะธัะตัะบะพะน RAM: ะะก ยซัะฑัะฐััะฒะฐะตัยป ะฝะตะธัะฟะพะปัะทัะตะผัะต ัััะฐะฝะธัั ะฝะฐ ะดะธัะบ (swap) ะธ ะฟะพะดะณััะถะฐะตั ะพะฑัะฐัะฝะพ.

> ๐ย**ะกะฝะพัะบะฐ: ัััะฐะฝะธัั ะธ TLB.**ยะ ัะตะฐะปัะฝะพััะธ ะะก ะพัะพะฑัะฐะถะฐะตั ะฟะฐะผััั ะฝะต ะฟะพะฑะฐะนัะพะฒะพ, ะฐย**ัััะฐะฝะธัะฐะผะธ**ย(ะพะฑััะฝะพ 4 ะะ). ะขะฐะฑะปะธัะฐ ัััะฐะฝะธั ััะฐะฝะธั ัะพะพัะฒะตัััะฒะธะต ยซะฒะธัััะฐะปัะฝะฐั ัััะฐะฝะธัะฐ โ ัะธะทะธัะตัะบะฐัยป, ะฐ ัะฟะตัะธะฐะปัะฝัะน ะบัั TLB (Translation Lookaside Buffer) ััะบะพััะตั ััะพั ะฟะตัะตะฒะพะด. ะะปั ะฑะพะปััะธั ะบัั JVM ะฟะพะดะดะตัะถะธะฒะฐะตั large pages (`-XX:+UseLargePages`), ััะพ ัะผะตะฝััะฐะตั ะบะพะปะธัะตััะฒะพ ะทะฐะฟะธัะตะน ะฒ ัะฐะฑะปะธัะต ะธ ะฟัะพะผะฐัะพะฒ TLB. ะะพ ััะพ ัะตะผะฐ ะดะปั ะพัะดะตะปัะฝะพะณะพ ัะฐะทะณะพะฒะพัะฐ.

### 3.2. ะะฒะฐ ะบะปััะตะฒัั ัะตะณะธะพะฝะฐ: Stack ะธ Heap

ะะฝัััะธ ะฐะดัะตัะฝะพะณะพ ะฟัะพัััะฐะฝััะฒะฐ ะฟัะพัะตััะฐ ะฒัะดะตะปััััั ะฝะตัะบะพะปัะบะพ ะพะฑะปะฐััะตะน. ะะฒะต ะบัะธัะธัะตัะบะธ ะฒะฐะถะฝั:

text

```
  ะะดัะตัะฝะพะต ะฟัะพัััะฐะฝััะฒะพ ะฟัะพัะตััะฐ (ัะฟัะพััะฝะฝะฐั ััะตะผะฐ)
  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ ััะฐััะธะต ะฐะดัะตัะฐ
  โ         STACK (ััะตะบ)       โ
  โ                            โ
  โ โ โ โ โ โ โ โ โ โ โ โ โ  โ  โ ัะฒะพะฑะพะดะฝะพะต ะฟัะพัััะฐะฝััะฒะพ
  โ                            โ
  โ         HEAP (ะบััะฐ)        โ
  โ                            โ
  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
  โ   ะะพะด ะฟัะพะณัะฐะผะผั + ััะฐัะธะบะฐ  โ
  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ ะผะปะฐะดัะธะต ะฐะดัะตัะฐ
```

> โ๏ธย**ะะฐะถะฝะพ.**ยStack ะธ Heap โ ััะพ ะฝะต ะดะฒะฐ ัะฐะทะฝัั ยซะถะตะปะตะทะฐยป. ะญัะพ ะดะฒะต ะพะฑะปะฐััะธ ะฒ ะพะดะฝะพะน ะธ ัะพะน ะถะต RAM, ะบะพัะพััะต ะธัะฟะพะปัะทััััั ะฟะพ-ัะฐะทะฝะพะผั. ะะฐะทะฝะธัะฐ โ ะฒ ะดะธััะธะฟะปะธะฝะต ะดะพัััะฟะฐ ะธ ัะฟัะฐะฒะปะตะฝะธั. ะกัะตะผะฐ ะฒััะต โ ััะปะพะฒะฝะฐั ะธะปะปััััะฐัะธั. ะะฐ x86/ARM ััะตะบ ัะฐัััั ะพั ััะฐััะธั ะฐะดัะตัะพะฒ ะบ ะผะปะฐะดัะธะผ (ะฒะฝะธะท), ะฝะพ ะดะปั ะฝะฐะณะปัะดะฝะพััะธ ะผั ัะธััะตะผ ะฒะตััะธะฝั ััะตะบะฐ ัะฒะตััั. JVM-ัะฟะตัะธัะธะบะฐัะธั ะฝะต ััะตะฑัะตั ะบะพะฝะบัะตัะฝะพะณะพ ัะฐัะฟะพะปะพะถะตะฝะธั ััะธั ะพะฑะปะฐััะตะน.

### 3.3. Stack (ััะตะบ ะฒัะทะพะฒะพะฒ)

#### ะัะธะฝัะธะฟ ัะฐะฑะพัั

ะัะตะดััะฐะฒััะต ััะพะฟะบั ัะฐัะตะปะพะบ. ะะพะฒัั ััะฐะฒะธัะต ัะฒะตััั ะธ ะฑะตัััะต ัะพะถะต ัะฒะตััั. ะะตะปัะทั ะฒัะดะตัะฝััั ัะฐัะตะปะบั ะธะท ัะตัะตะดะธะฝั. ะญัะพย**LIFO**ยโ Last In, First Out.

ะกัะตะบ ะฒ ะฟะฐะผััะธ ัะฐะฑะพัะฐะตั ัะฐะบ ะถะต: ะฒะผะตััะพ ัะฐัะตะปะพะบ โย**ััะตะนะผั ะฒัะทะพะฒะพะฒ (stack frames)**, ะฑะปะพะบะธ ะดะฐะฝะฝัั, ะบะพัะพััะต ัะพะทะดะฐัััั ะฟัะธ ะบะฐะถะดะพะผ ะฒัะทะพะฒะต ะผะตัะพะดะฐ.

#### ะงัะพ ะฒ ะบะฐะถะดะพะผ ััะตะนะผะต

ะัะธ ะฒัะทะพะฒะต ะผะตัะพะดะฐ ะฝะฐ ะฒะตััะธะฝั ััะตะบะฐ ะบะปะฐะดัััั ะฝะพะฒัะน ััะตะนะผ ั:

- **ะะพะบะฐะปัะฝัะผะธ ะฟะตัะตะผะตะฝะฝัะผะธ**ยะผะตัะพะดะฐ (`int x = 10`,ย`double y = 3.14`)
- **ะะฐัะฐะผะตััะฐะผะธ**, ะฟะตัะตะดะฐะฝะฝัะผะธ ะฒ ะผะตัะพะด
- **ะะดัะตัะพะผ ะฒะพะทะฒัะฐัะฐ**ยโ ะบัะดะฐ ะฒะตัะฝััััั ะฟะพัะปะต ะทะฐะฒะตััะตะฝะธั ะผะตัะพะดะฐ
- **ะกััะปะบะฐะผะธ ะฝะฐ ะพะฑัะตะบัั**ย(ัะฐะผะธ ะพะฑัะตะบัั ะฟัะธ ััะพะผ ะปะตะถะฐั ะฒ Heap)

ะะพะณะดะฐ ะผะตัะพะด ะทะฐะฒะตััะฐะตััั โ ััะตะนะผ ัะฝะธะผะฐะตััั ั ะฒะตััะธะฝั. ะัะต ะปะพะบะฐะปัะฝัะต ะฟะตัะตะผะตะฝะฝัะต ะผะณะฝะพะฒะตะฝะฝะพ ะธััะตะทะฐัั. ะะธะบะฐะบะพะณะพ ัะฑะพััะธะบะฐ ะผััะพัะฐ ะฝะต ะฝัะถะฝะพ.

#### ะัะธะผะตั ะฒ ะบะพะดะต

Java

```
void main() {
    int x = 10;
    helper(x);
}

void helper(int value) {
    int y = value + 5;
}
```

**ะจะฐะณ 1.**ยะัะทัะฒะฐะตัััย`main()`:

text

```
        โโโโโโโโโโโโโโโโโโโโโโโ
        โ  main()             โ
        โ    x = 10           โ  โ ะฒะตััะธะฝะฐ ััะตะบะฐ
        โโโโโโโโโโโโโโโโโโโโโโโ
```

**ะจะฐะณ 2.**ย`main()`ยะฒัะทัะฒะฐะตัย`helper(10)`:

text

```
        โโโโโโโโโโโโโโโโโโโโโโโ
        โ  helper()           โ
        โ    value = 10       โ  โ ะฒะตััะธะฝะฐ ััะตะบะฐ
        โ    y = 15           โ
        โโโโโโโโโโโโโโโโโโโโโโโค
        โ  main()             โ
        โ    x = 10           โ
        โโโโโโโโโโโโโโโโโโโโโโโ
```

**ะจะฐะณ 3.**ย`helper()`ยะทะฐะฒะตััะฐะตััั โ ััะตะนะผ ัะฝัั:

text

```
        โโโโโโโโโโโโโโโโโโโโโโโ
        โ  main()             โ
        โ    x = 10           โ  โ ะฒะตััะธะฝะฐ ััะตะบะฐ
        โโโโโโโโโโโโโโโโโโโโโโโ
```

**ะจะฐะณ 4.**ย`main()`ยะทะฐะฒะตััะฐะตััั โ ััะตะบ ะฟััั.

#### ะกััะปะบะธ vs ะทะฝะฐัะตะฝะธั ะฝะฐ ััะตะบะต

Java

```
void main() {
    int x = 10;
    Object obj = new Object();
}
```

ะะดะตัั ะฟัะพะธััะพะดัั ะดะฒะต ะฟัะธะฝัะธะฟะธะฐะปัะฝะพ ัะฐะทะฝัะต ะฒะตัะธ:

- `int x = 10`ยโ ะทะฝะฐัะตะฝะธะตย`10`ยะปะตะถะธั ะฟััะผะพ ะฒ ััะตะบะต, ะฒ ััะตะนะผะตย`main()`. ะงะตัััะต ะฑะฐะนัะฐ.
- `Object obj = new Object()`ยโ ะฒ ััะตะบะต ะปะตะถะธั ัะพะปัะบะพย**ัััะปะบะฐ**ย(ัะบะฐะทะฐัะตะปั ะฝะฐ ะพะฑัะตะบั), ะฐ ัะฐะผ ะพะฑัะตะบั ัะพะทะดะฐัััั ะฒ Heap.

text

```
          STACK                              HEAP
   โโโโโโโโโโโโโโโโโโโโโโโ          โโโโโโโโโโโโโโโโโโโโโโโโ
   โ  main()             โ          โ                      โ
   โ   x = 10            โ          โ  โโโโโโโโโโโโโโโโโโ  โ
   โ   obj โโโโโโโโโโโโโโโโโโโโโโโบ  โ  โ  Object        โ  โ
   โ   (ัััะปะบะฐ, 4-8 ะฑะฐะนั)โ          โ  โ  (header ~12 B)โ  โ
   โโโโโโโโโโโโโโโโโโโโโโโ          โ  โ  (ะธัะพะณะพ ~16 B) โ  โ
                                    โ  โโโโโโโโโโโโโโโโโโ  โ
                                    โโโโโโโโโโโโโโโโโโโโโโโโ
```

|ะะตัะตะผะตะฝะฝะฐั|ะงัะพ ะฒ ััะตะบะต|ะงัะพ ะฒ ะบััะต|
|---|---|---|
|`int x = 10`|ะกะฐะผะพ ะทะฝะฐัะตะฝะธะตย`10`ย(4 ะฑะฐะนัะฐ)|ะะธัะตะณะพ|
|`Object obj`|ะกััะปะบะฐ (4 ะธะปะธ 8 ะฑะฐะนั)|ะะฑัะตะบัย`Object`ย(~16 ะฑะฐะนั)|

**ะะฐะถะฝัะน ะฝัะฐะฝั:**ยะณะดะต ะปะตะถะธั ะฟะตัะตะผะตะฝะฝะฐั, ะทะฐะฒะธัะธั ะพั ัะพะณะพ,ย**ะณะดะต ะพะฝะฐ ะพะฑััะฒะปะตะฝะฐ**, ะฐ ะฝะต ัะพะปัะบะพ ะพั ัะธะฟะฐ. ะะพะบะฐะปัะฝะฐั ะฟะตัะตะผะตะฝะฝะฐัย`int x`ยะปะตะถะธั ะฒ ััะตะบะต. ะะพ ะฟะพะปะตย`int count`ยะฒะฝัััะธ ะพะฑัะตะบัะฐย`Counter`ยะปะตะถะธั ะฒ ะบััะต โ ะบะฐะบ ัะฐััั ััะพะณะพ ะพะฑัะตะบัะฐ. ะขะธะฟย`int`, ะฝะพ ะพะฑัะตะบั ะถะธะฒัั ะฒ ะบััะต, ะธ ะฒัะต ะตะณะพ ะฟะพะปั โ ะฒะผะตััะต ั ะฝะธะผ.

> ๐ย**ะกะฝะพัะบะฐ: ัะฐะทะผะตั ัะปะพัะฐ ะฝะฐ ััะตะบะต.**ยะกะตะผะฐะฝัะธัะตัะบะธย`int`ยโ 4 ะฑะฐะนัะฐ. ะะพ ะฝะฐ 64-ะฑะธัะฝะพะน JVM ัะปะพั ััะตะบะพะฒะพะณะพ ััะตะนะผะฐ ะฒััะพะฒะฝะตะฝ ะดะพ 8 ะฑะฐะนั, ะฟะพััะพะผั ัะธะทะธัะตัะบะธย`int`ยะฝะฐ ััะตะบะต ะผะพะถะตั ะทะฐะฝะธะผะฐัั 8. ะญัะพ ะดะตัะฐะปั ัะตะฐะปะธะทะฐัะธะธ, ะบะพัะพัะฐั ะฝะต ะผะตะฝัะตั ัััั: ะดะฐะถะต ะฟัะธ ะฒััะฐะฒะฝะธะฒะฐะฝะธะธ ััะพ ะฒ ัะฐะทั ะผะตะฝััะต, ัะตะผย`Integer`ย(~20 ะฑะฐะนั ั ััััะพะผ ัััะปะบะธ ะธ ะพะฑัะตะบัะฐ ะฒ ะบััะต).

#### ะะพัะตะผั ััะตะบ ะฑัััััะน

ะัะดะตะปะตะฝะธะต ะฟะฐะผััะธ ะฒ ััะตะบะต โ ะฒ ัััะฝะพััะธ,ย**ัะดะฒะธะณ stack pointer**:

text

```
ะัะดะตะปะธัั 32 ะฑะฐะนัะฐ โ sub rsp, 32  (ัะดะฒะธะฝััั ัะบะฐะทะฐัะตะปั ะฝะฐ 32)
ะัะฒะพะฑะพะดะธัั        โ add rsp, 32  (ัะดะฒะธะฝััั ัะบะฐะทะฐัะตะปั ะพะฑัะฐัะฝะพ)
```

ะะพะปะฝัะน ะฟัะพะปะพะณ ะฒัะทะพะฒะฐ ะผะตัะพะดะฐ ะฒะบะปััะฐะตั ะตัั ะฟะฐัั ะธะฝััััะบัะธะน (`push rbp; mov rbp, rsp`), ะฝะพ ะฒัั ะฒะผะตััะต ััะพ ะฝะฐะฝะพัะตะบัะฝะดั โ ะฝะตัะพะฟะพััะฐะฒะธะผะพ ัะพ ััะพะธะผะพัััั ะพะฑัะตะบัะฐ ะฒ ะบััะต.

ะะพ ะดะตะปะพ ะฝะต ัะพะปัะบะพ ะฒ ยซะพะดะฝะพะน ะธะฝััััะบัะธะธยป. ะััั ะฑะพะปะตะต ะณะปัะฑะพะบะฐั ะฟัะธัะธะฝะฐ:ย**ะบัั**. ะะฐะฝะฝัะต ััะตะบะฐ ะบะพะผะฟะฐะบัะฝั ะธ ยซะณะพัััะธยป โ ะพะฝะธ ะฟะพััะพัะฝะฝะพ ะธัะฟะพะปัะทััััั ะธ ะฟะพััะธ ะฒัะตะณะดะฐ ะฝะฐัะพะดัััั ะฒ L1-ะบััะต ะฟัะพัะตััะพัะฐ. ะะฑัะฐัะตะฝะธะต ะบ ะฝะธะผ โ ััะพ ~4 ัะฐะบัะฐ. ะะฑัะตะบัั ะฒ ะบััะต ัะฐะทะฑัะพัะฐะฝั ะฟะพ ะฟะฐะผััะธ, ะธ ะบะฐะถะดะพะต ะพะฑัะฐัะตะฝะธะต ัะธัะบัะตั ะพะบะฐะทะฐัััั cache miss โ ะฐ ััะพ ~200 ัะฐะบัะพะฒ, ัะฐะทะฝะธัะฐ ะฒย**50 ัะฐะท**.

ะะพะณะดะฐ ะผั ะณะพะฒะพัะธะผ ยซััะตะบ ะฑััััะตะต ะบััะธยป โ ะผั ะฝะฐ ัะฐะผะพะผ ะดะตะปะต ะณะพะฒะพัะธะผ ยซL1-ะบัั ะฑััััะตะต ัะปััะฐะนะฝะพะณะพ ะพะฑัะฐัะตะฝะธั ะฒ RAMยป.

#### StackOverflowError

ะฃ ััะตะบะฐ ัะธะบัะธัะพะฒะฐะฝะฝัะน ัะฐะทะผะตั (ะฟะพ ัะผะพะปัะฐะฝะธั ะพะฑััะฝะพ ะพะบะพะปะพ 1 ะะ ะฝะฐ ะฟะพัะพะบ; ะทะฐะฒะธัะธั ะพั ะะก ะธ JVM, ะฝะฐัััะฐะธะฒะฐะตััั ัะตัะตะทย`-Xss`). ะะปะฐััะธัะตัะบะธะน ัะฟะพัะพะฑ ะตะณะพ ะธััะตัะฟะฐัั โ ะฑะตัะบะพะฝะตัะฝะฐั ัะตะบัััะธั:

Java

```
void oops() {
    oops(); // ะบะฐะถะดัะน ะฒัะทะพะฒ ะบะปะฐะดัั ะฝะพะฒัะน ััะตะนะผ
}
```

text

```
        โโโโโโโโโโโโโโโโโโโ
        โ  oops() #10000  โ  โ ะฟะพัะพะปะพะบ! ะะฐะปััะต ะฝะตะบัะดะฐ!
        โโโโโโโโโโโโโโโโโโโค
        โ  oops() #9999   โ
        โโโโโโโโโโโโโโโโโโโค
        โ  ...            โ
        โโโโโโโโโโโโโโโโโโโค
        โ  oops() #1      โ
        โโโโโโโโโโโโโโโโโโโค
        โ  main()         โ
        โโโโโโโโโโโโโโโโโโโ
        ๐ฅ StackOverflowError
```

ะ ัะตัะผะธะฝะฐั ะฐะฝะฐะปะพะณะธะธ: ััะพะฟะบะฐ ัะฐัะตะปะพะบ ะดะพัะพัะปะฐ ะดะพ ะฟะพัะพะปะบะฐ โ ะบะปะฐััั ะฑะพะปััะต ะฝะตะบัะดะฐ.

**ะะดะต ะฐะฝะฐะปะพะณะธั ยซััะพะฟะบะฐ ัะฐัะตะปะพะบยป ะปะพะผะฐะตััั:**

- ยซะขะฐัะตะปะบะธยป ัะฐะทะฝะพะณะพ ัะฐะทะผะตัะฐ: ััะตะนะผ ะผะตัะพะดะฐ ั ะดะตััััั ะฟะตัะตะผะตะฝะฝัะผะธ ะฑะพะปััะต, ัะตะผ ั ะพะดะฝะพะน.
- ะะฐะฝะฝัะต ัะธะทะธัะตัะบะธ ะพััะฐัััั ะฒ ะฟะฐะผััะธ ะฟะพัะปะต ัะฝััะธั ััะตะนะผะฐ โ ะฟัะพััะพ ััะธัะฐัััั ะผััะพัะพะผ ะธ ะฑัะดัั ะฟะตัะตะทะฐะฟะธัะฐะฝั ัะปะตะดัััะธะผ ะฒัะทะพะฒะพะผ.

### 3.4. Heap (ะบััะฐ)

#### ะะฐัะตะผ ะฝัะถะฝะฐ ะบััะฐ, ะตัะปะธ ะตััั ััะตะบ

ะกัะตะบ ะฑัััััะน, ะฝะพ ั ะฝะตะณะพ ะดะฒะฐ ะถัััะบะธั ะพะณัะฐะฝะธัะตะฝะธั:

1. **ะะฐะทะผะตั ัะธะบัะธัะพะฒะฐะฝ**ยโ ะฑะพะปััะธะต ะดะฐะฝะฝัะต ะฝะต ะฒะปะตะทัั.
2. **ะัะตะผั ะถะธะทะฝะธ ะฟัะธะฒัะทะฐะฝะพ ะบ ะผะตัะพะดั**ยโ ะผะตัะพะด ะทะฐะฒะตััะธะปัั, ะฒัะต ะตะณะพ ะดะฐะฝะฝัะต ะธััะตะทะปะธ.

ะ ะตัะปะธ ะพะฑัะตะบั ะดะพะปะถะตะฝ ะฟะตัะตะถะธัั ะผะตัะพะด, ะฒ ะบะพัะพัะพะผ ะฑัะป ัะพะทะดะฐะฝ? ะัะปะธ ะตะณะพ ะฝัะถะฝะพ ะฟะตัะตะดะฐัั ะดััะณะพะผั ะฟะพัะพะบั? ะัะปะธ ัะฐะทะผะตั ะดะฐะฝะฝัั ะฝะตะธะทะฒะตััะตะฝ ะทะฐัะฐะฝะตะต?

Java

```
Object createObject() {
    Object obj = new Object();  // ะพะฑัะตะบั ัะพะทะดะฐะฝ ะฒ ะบััะต
    return obj;                 // ะผะตัะพะด ะทะฐะฒะตััะธะปัั, ััะตะนะผ ัะฝัั...
}                               // ...ะฝะพ ะพะฑัะตะบั ะะะ โ ะฒัะทัะฒะฐััะธะน ะบะพะด
                                // ะฟะพะปััะธะป ะฝะฐ ะฝะตะณะพ ัััะปะบั
```

ะคัะตะนะผย`createObject()`ยัะฝัั ัะพ ััะตะบะฐ. ะะพะบะฐะปัะฝะฐั ัััะปะบะฐย`obj`ยะธััะตะทะปะฐ. ะะพ ัะฐะผ ะพะฑัะตะบั ะฟัะพะดะพะปะถะฐะตั ะถะธัั ะฒ ะบััะต โ ั ะฒัะทัะฒะฐััะตะณะพ ะบะพะดะฐ ะตััั ะฝะพะฒะฐั ัััะปะบะฐ ะฝะฐ ะฝะตะณะพ.

#### ะะฝะฐะปะพะณะธั ยซะะพัะพะฑะบะธ ะฒ ะบะพะผะฝะฐัะตยป

ะัะปะธ ััะตะบ โ ััะพ ััะพะฟะบะฐ ัะฐัะตะปะพะบ, ัะพ ะบััะฐ โ ะฑะพะปััะฐั ะบะพะผะฝะฐัะฐ, ะฒ ะบะพัะพัะพะน ััะพัั ะฟะพะดะฟะธัะฐะฝะฝัะต ะบะพัะพะฑะบะธ.

|ะญะปะตะผะตะฝั|ะะฝะฐะปะพะณะธั|ะงัะพ ะฒ ัะตะฐะปัะฝะพััะธ|
|---|---|---|
|ะะพะผะฝะฐัะฐ|ะััะฐ (Heap)|ะะฑะปะฐััั RAM, ะฒัะดะตะปะตะฝะฝะฐั ะฟะพะด ะพะฑัะตะบัั|
|ะะพัะพะฑะบะฐ|ะะฑัะตะบั|`new Object()`,ย`new String("hello")`|
|ะญัะธะบะตัะบะฐ ะฝะฐ ะบะพัะพะฑะบะต|Object header|ะขะธะฟ, ัะตั, ัะปะฐะณะธ GC (~12โ16 ะฑะฐะนั)|
|ะกะพะดะตัะถะธะผะพะต ะบะพัะพะฑะบะธ|ะะพะปั ะพะฑัะตะบัะฐ|ะะพะปะตะทะฝัะต ะดะฐะฝะฝัะต|
|ะะฐะฟะธัะบะฐ ยซะบะพัะพะฑะบะฐ ััะพะธั ะฒ ัะณะปั ั ะพะบะฝะฐยป|ะกััะปะบะฐ (ะฒ ััะตะบะต ะธะปะธ ะฒ ะดััะณะพะผ ะพะฑัะตะบัะต)|4 ะธะปะธ 8 ะฑะฐะนั, ะฐะดัะตั ะฒ ะฟะฐะผััะธ|

ะขะฐัะตะปะบะธ ะฒ ััะพะฟะบะต ัะฑะธัะฐัััั ัััะพะณะพ ัะฒะตััั. ะะพัะพะฑะบะธ ะฒ ะบะพะผะฝะฐัะต โ ะฝะตั: ะธั ะผะพะถะตั ะฑััั ะผะฝะพะณะพ, ะพะฝะธ ัะฐะทะฝะพะณะพ ัะฐะทะผะตัะฐ, ะฟะพัะฒะปััััั ะธ ะธััะตะทะฐัั ะฒ ะฟัะพะธะทะฒะพะปัะฝะพะผ ะฟะพััะดะบะต. ะะปั ัะฑะพัะบะธ ะฝะตะฝัะถะฝัั ะบะพัะพะฑะพะบ ะฝัะถะตะฝ ัะฟะตัะธะฐะปัะฝัะน ัะตะปะพะฒะตะบ โย**ัะฑะพััะธะบ (Garbage Collector)**.

#### ะงัะพ ััะฐะฝะธััั ะฒ ะบััะต

ะ Java โ ะฒัะต ะพะฑัะตะบัั:

|ะงัะพ ะฒั ะฟะธัะตัะต|ะงัะพ ะฒ ะบััะต|
|---|---|
|`new Object()`|ะญะบะทะตะผะฟะปััย`Object`|
|`new String("hello")`|ะญะบะทะตะผะฟะปััย`String`|
|`new int[100]`|ะะฐััะธะฒ ะธะท 100 ัะปะตะผะตะฝัะพะฒ|
|`Integer x = 42`|ะะฑัะตะบั-ะพะฑัััะบะฐย`Integer`ย(autoboxing)|
|`new ArrayList<>()`|ะะฑัะตะบัย`ArrayList`ย+ ะฒะฝัััะตะฝะฝะธะน ะผะฐััะธะฒ|

ะะฐะถะดัะน ะพะฑัะตะบั ะฒ ะบััะต ัะพััะพะธั ะธะท:

text

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Object header (~12-16 ะฑะฐะนั) โ  โ ะผะตัะฐะธะฝัะพัะผะฐัะธั: ัะธะฟ, ัะตั, ัะปะฐะณะธ GC
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ะะพะปั ะพะฑัะตะบัะฐ (ะดะฐะฝะฝัะต)       โ  โ ะฟะพะปะตะทะฝะฐั ะฝะฐะณััะทะบะฐ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ะััะฐะฒะฝะธะฒะฐะฝะธะต (padding)      โ  โ ะดะพ ะบัะฐัะฝะพััะธ 8 ะฑะฐะนั
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

ะะฐะถะต ะฟัััะพะนย`new Object()`ยะทะฐะฝะธะผะฐะตั ~16 ะฑะฐะนั โ ะทะฐะณะพะปะพะฒะพะบ + ะฒััะฐะฒะฝะธะฒะฐะฝะธะต. ะะฐะทะผะตั ะทะฐะณะพะปะพะฒะบะฐ ะทะฐะฒะธัะธั ะพั ะฝะฐัััะพะตะบ JVM: 12 ะฑะฐะนั ั Compressed Oops (ะฟะพ ัะผะพะปัะฐะฝะธั ะดะปั ะบัั < 32 ะะ), 16 ะฑะฐะนั ะฑะตะท ะฝะธั.

**ะฃ ะผะฐััะธะฒะพะฒ ะทะฐะณะพะปะพะฒะพะบ ัะฐััะธัะตะฝะฝัะน:**ย12 ะฑะฐะนั ััะฐะฝะดะฐััะฝะพะณะพ header + 4 ะฑะฐะนัะฐ ะฟะพะปะตย`length`ย=ย**16 ะฑะฐะนั ะทะฐะณะพะปะพะฒะบะฐ**. ะญัะพ ะฒะฐะถะฝะพ ััะธััะฒะฐัั ะฟัะธ ะฟะพะดััััะต ะฟะฐะผััะธ.

#### ะะปะปะพะบะฐัะธั ะฒ ะบััะต: ะฑััััะตะต, ัะตะผ ะฒั ะดัะผะฐะตัะต

ะัะปะธ ะฒั ะทะฝะฐะบะพะผั ั C, ัะพ ะผะพะถะตัะต ะพะถะธะดะฐัั, ััะพ ะฒัะดะตะปะตะฝะธะต ะฟะฐะผััะธ ะฒ ะบััะต โ ะผะตะดะปะตะฝะฝะฐั ะพะฟะตัะฐัะธั: ะฐะปะปะพะบะฐัะพั (`malloc`) ะดะพะปะถะตะฝ ะธัะบะฐัั ัะฒะพะฑะพะดะฝัะน ะฑะปะพะบ ะฟะพะดัะพะดััะตะณะพ ัะฐะทะผะตัะฐ. ะ Java ััะพ ะฝะต ัะฐะบ.

ะ HotSpot JVM ะบะฐะถะดัะน ะฟะพัะพะบ ะฟะพะปััะฐะตั ัะพะฑััะฒะตะฝะฝัะนย**TLAB (Thread-Local Allocation Buffer)**ยโ ะผะฐะปะตะฝัะบะธะน ะบััะพัะตะบ ะบััะธ ะดะปั ะปะธัะฝะพะณะพ ะฟะพะปัะทะพะฒะฐะฝะธั. ะัะดะตะปะตะฝะธะต ะพะฑัะตะบัะฐ ะฒะฝัััะธ TLAB โ ััะพ ัะดะฒะธะณ ัะบะฐะทะฐัะตะปั (bump pointer), ะฟะพััะธ ัะฐะบ ะถะต ะฑััััะพ, ะบะฐะบ ะฝะฐ ััะตะบะต:

text

```
TLAB ะฟะพัะพะบะฐ #1:
  โโโโโโโโโโฌโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโ
  โ Obj A  โ Obj B  โ    ัะฒะพะฑะพะดะฝะพ        โ
  โโโโโโโโโโดโโโโโโโโโดโโโฒโโโโโโโโโโโโโโโโโโ
                       โ
                   ัะบะฐะทะฐัะตะปั
                   (ัะดะฒะธะฝั ััะดะฐ โ ะฒัะดะตะปะธะป ะฟะฐะผััั)
```

**ะขะพะณะดะฐ ะฒ ััะผ ัะตะฐะปัะฝะฐั ัะตะฝะฐ ะพะฑัะตะบัะพะฒ ะฒ ะบััะต?**ยะะต ะฒ ะฐะปะปะพะบะฐัะธะธ, ะฐ ะฒ:

1. **ะกะฑะพัะบะต ะผััะพัะฐ (GC).**ยะงะตะผ ะฑะพะปััะต ะพะฑัะตะบัะพะฒ ัะพะทะดะฐัััั ะธ ัะผะธัะฐะตั, ัะตะผ ัะฐัะต GC ะดะพะปะถะตะฝ ัะฐะฑะพัะฐัั. ะ GC โ ััะพ CPU-ะฒัะตะผั ะธ ะฒะพะทะผะพะถะฝัะต ะฟะฐัะทั (stop-the-world).
2. **ะัะพะผะฐัะฐั ะบััะฐ.**ยะงัะพะฑั ะฟัะพัะธัะฐัั ะทะฝะฐัะตะฝะธะต ะพะฑัะตะบัะฐ, ะฟัะพัะตััะพั ัะฝะฐัะฐะปะฐ ะฟะตัะตัะพะดะธั ะฟะพ ัััะปะบะต (ััะพ ะพะฑัะฐัะตะฝะธะต ะบ ะฟะฐะผััะธ), ะฟะพัะพะผ ัะธัะฐะตั ะดะฐะฝะฝัะต (ะตัั ะพะดะฝะพ ะพะฑัะฐัะตะฝะธะต). ะัะปะธ ะพะฑัะตะบั ะฝะต ะฒ ะบััะต โ ััะพ ัะพัะฝะธ ัะฐะบัะพะฒ ะพะถะธะดะฐะฝะธั. ะะฑัะตะบัั ะฒ ะบััะต ัะฐะทะฑัะพัะฐะฝั ะฟะพ ะฟะฐะผััะธ ะฝะต ัะฐะบ ะบะพะผะฟะฐะบัะฝะพ, ะบะฐะบ ะฟัะธะผะธัะธะฒั ะฝะฐ ััะตะบะต.
3. **ะะฐะบะปะฐะดะฝัั ัะฐััะพะดะฐั ะฝะฐ ะทะฐะณะพะปะพะฒะพะบ.**ยะะฐะถะดัะน ะพะฑัะตะบั ะฝะตััั 12โ16 ะฑะฐะนั ะผะตัะฐะธะฝัะพัะผะฐัะธะธ, ะดะฐะถะต ะตัะปะธ ะฟะพะปะตะทะฝัั ะดะฐะฝะฝัั โ 4 ะฑะฐะนัะฐ (ะบะฐะบ ัย`Integer`).

#### Garbage Collector โ ะบัะพ ัะฑะธัะฐะตั ะผััะพั

ะ C/C++ ะฟัะพะณัะฐะผะผะธัั ัะฐะผ ะพัะฒะพะฑะพะถะดะฐะตั ะฟะฐะผััั (`free()`,ย`delete`). ะะฐะฑัะป โ ััะตัะบะฐ. ะัะฒะพะฑะพะดะธะป ะดะฒะฐะถะดั โ ะบัะฐั.

ะ Java ะทะฐ ัะฑะพัะบั ะพัะฒะตัะฐะตัย**Garbage Collector (GC)**. ะัะฐะฒะธะปะพ:ย**GC ััะธัะฐะตั ะพะฑัะตะบั ะถะธะฒัะผ, ะตัะปะธ ะดะพ ะฝะตะณะพ ะผะพะถะฝะพ ะดะพะนัะธ ะฟะพ ัะตะฟะพัะบะต ัััะปะพะบ ะพั GC roots.**ยGC roots โ ััะพ:

- **ะะบัะธะฒะฝัะต ััะตะบะพะฒัะต ััะตะนะผั**ย(ะปะพะบะฐะปัะฝัะต ะฟะตัะตะผะตะฝะฝัะต ะธ ะฟะฐัะฐะผะตััั ะถะธะฒัั ะผะตัะพะดะพะฒ)
- **ะกัะฐัะธัะตัะบะธะต ะฟะพะปั**ยะบะปะฐััะพะฒ
- **JNI-ัััะปะบะธ**ย(ะธะท ะฝะฐัะธะฒะฝะพะณะพ ะบะพะดะฐ)

ะะตั ะฟััะธ ะพั GC root โย**ะผััะพั**. ะััั ะฟััั, ะดะฐะถะต ะตัะปะธ ะพะฑัะตะบั ะฒะฐะผ ะปะพะณะธัะตัะบะธ ะฝะต ะฝัะถะตะฝ, โย**ะถะธะฒ**. ะญัะพ ะธ ะตััั ยซััะตัะบะฐ ะฟะฐะผััะธยป ะฒ Java:

Java

```
// ะะปะฐััะธัะตัะบะฐั ััะตัะบะฐ: ะพะฑัะตะบั ะฒ Map, ะบะพัะพััะน ยซะปะพะณะธัะตัะบะธ ะฝะต ะฝัะถะตะฝยป
Map<String, byte[]> cache = new HashMap<>();

void processRequest(String key) {
    cache.put(key, new byte[1024 * 1024]);  // 1 ะะ
    // ... ะธัะฟะพะปัะทัะตะผ ะดะฐะฝะฝัะต ...
    // ะทะฐะฑัะปะธ cache.remove(key)!
    // GC ะฒะธะดะธั: cache โ entry โ byte[] โ ัะตะฟะพัะบะฐ ะพั GC root (ััะฐัะธัะตัะบะพะต ะฟะพะปะต)
    // ะะฑัะตะบั ะะะ. ะะฐะผััั ะฝะต ะพัะฒะพะฑะพะถะดะฐะตััั. ะััะฐ ัะฐัััั.
}
```

Java

```
void example() {
    Object a = new Object();  // ะพะฑัะตะบั 1
    Object b = new Object();  // ะพะฑัะตะบั 2
    a = b;                    // 'a' ัะตะฟะตัั ัะบะฐะทัะฒะฐะตั ะฝะฐ ะพะฑัะตะบั 2
}                             // ะพะฑัะตะบั 1 โ ะะฃะกะะ (ะฝะตั ะฟััะธ ะพั GC roots)
```

text

```
// ะะ:       a โโโบ [Object 1]     ะะะกะะ:    a โโโ
//           b โโโบ [Object 2]               b โโโดโโโบ [Object 2]
//                                               [Object 1] ๐
```

ะ ัะตัะผะธะฝะฐั ะฐะฝะฐะปะพะณะธะธ: ัะฑะพััะธะบ (GC) ะฝะฐัะธะฝะฐะตั ะพั ะดะฒะตัะธ (GC roots) ะธ ะธะดัั ะฟะพ ัะตะฟะพัะบะฐะผ ะทะฐะฟะธัะพะบ. ะะฐะถะดะฐั ะบะพัะพะฑะบะฐ, ะดะพ ะบะพัะพัะพะน ะผะพะถะฝะพ ะดะพะนัะธ โ ะถะธะฒะฐ. ะัะปะธ ะดะพ ะบะพัะพะฑะบะธ ะฝะตั ะฝะธ ะพะดะฝะพะณะพ ะผะฐัััััะฐ ะพั ะดะฒะตัะธ โ ะตั ะฒัะฑัะฐััะฒะฐัั. ะะพ ะตัะปะธ ะฝะฐ ะทะฐะฑัััั ะบะพัะพะฑะบั ัะปััะฐะนะฝะพ ะฒะตะดัั ะทะฐะฟะธัะบะฐ ะธะท ะดััะณะพะน ะบะพัะพะฑะบะธ โ ะพะฝะฐ ะพััะฐะฝะตััั ะฝะฐะฒัะตะณะดะฐ, ะดะฐะถะต ะตัะปะธ ะฒะฐะผ ะฝะต ะฝัะถะฝะฐ.

GC ัะฐะบะถะต ัะผะตะตัย**ัะฟะปะพัะฝััั**ยะบััั, ัะดะฒะธะณะฐั ะถะธะฒัะต ะพะฑัะตะบัั ะฒะฟะปะพัะฝัั ะดััะณ ะบ ะดััะณั ะธ ััััะฐะฝัั ััะฐะณะผะตะฝัะฐัะธั. ะะพ ััะพ ะดะพะฟะพะปะฝะธัะตะปัะฝะฐั ัะฐะฑะพัะฐ, ะบะพัะพัะฐั ััะพะธั CPU-ะฒัะตะผะตะฝะธ.

#### OutOfMemoryError

ะััะฐ ะฑะพะปััะฐั, ะฝะพ ะบะพะฝะตัะฝะฐั. ะ JVM ะตั ัะฐะทะผะตั ะทะฐะดะฐัััั ะฟะฐัะฐะผะตััะฐะผะธย`-Xms`ย(ะฝะฐัะฐะปัะฝัะน) ะธย`-Xmx`ย(ะผะฐะบัะธะผะฐะปัะฝัะน).

text

```
HEAP (ะผะฐะบัะธะผัะผ 512 ะะ):
  โโโโโโโโโโฌโโโโโโโโโฌโโโโโโโโโฌโโโโโโโโโฌโโโโโโโโโฌโโโโโโโโโ
  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
  โโโโโโโโโโดโโโโโโโโโดโโโโโโโโโดโโโโโโโโโดโโโโโโโโโดโโโโโโโโโ
  ะกะฒะพะฑะพะดะฝะพะณะพ ะผะตััะฐ: 0.   GC: "ะัะต ะพะฑัะตะบัั ะถะธะฒัะต, ัะดะฐะปััั ะฝะตัะตะณะพ."
  new Object() โ ๐ฅ java.lang.OutOfMemoryError: Java heap space
```

ะขะธะฟะธัะฝัะต ะฟัะธัะธะฝั:

|ะัะธัะธะฝะฐ|ะัะธะผะตั|
|---|---|
|ะะตัะบะพะฝะตัะฝะพ ัะฐััััะฐั ะบะพะปะปะตะบัะธั|`List`, ะฒ ะบะพัะพััะน ะดะพะฑะฐะฒะปััั, ะฝะพ ะฝะต ัะดะฐะปััั|
|ะฃัะตัะบะฐ ัััะปะพะบ|ะะฑัะตะบั ะฝะต ะฝัะถะตะฝ ะปะพะณะธัะตัะบะธ, ะฝะพ ัััะปะบะฐ ะฝะฐ ะฝะตะณะพ ะตัั ะถะธะฒะฐ|
|ะกะปะธัะบะพะผ ะฑะพะปััะพะน ะพะฑัะตะบั|`new byte[500_000_000]`ยะฟัะธ ะบััะต ะฒ 256 ะะ|

> ๐ย**ะกะฝะพัะบะฐ: Metaspace ะธ ะดััะณะธะต ะฒะธะดั OOM.**ย`OutOfMemoryError: Java heap space`ยโ ะฝะต ะตะดะธะฝััะฒะตะฝะฝัะน ะฒะฐัะธะฐะฝั. JVM ััะฐะฝะธั ะผะตัะฐะดะฐะฝะฝัะต ะทะฐะณััะถะตะฝะฝัั ะบะปะฐััะพะฒ ะฒ ะพะฑะปะฐััะธย**Metaspace**ย(ะฒะฝะต ะพัะฝะพะฒะฝะพะน ะบััะธ). ะขะฐะผ ะถะธะฒัั ะพะฟะธัะฐะฝะธั ะบะปะฐััะพะฒ, ะธะฝัะพัะผะฐัะธั ะพ ะผะตัะพะดะฐั, constant pool. ะัะปะธ ะฟัะธะปะพะถะตะฝะธะต ะทะฐะณััะถะฐะตั ะพัะตะฝั ะผะฝะพะณะพ ะบะปะฐััะพะฒ (ะฝะฐะฟัะธะผะตั, ะฟัะธ ะณะพัััะตะผ ะฟะตัะตัะฐะทะฒััััะฒะฐะฝะธะธ ะฒ application server, ะธะปะธ ะฟัะธ ััะตัะบะฐั classloader'ะพะฒ), ะผะพะถะตั ะฟัะพะธะทะพะนัะธย`OutOfMemoryError: Metaspace`. ะะณัะฐะฝะธัะธะฒะฐะตััั ัะตัะตะทย`-XX:MaxMetaspaceSize`. ะญัะพ ะพัะดะตะปัะฝะฐั ัะตะผะฐ, ะฝะพ ะทะฝะฐัั ะพ ัััะตััะฒะพะฒะฐะฝะธะธ Metaspace ะฒะฐะถะฝะพ ะดะปั ะดะธะฐะณะฝะพััะธะบะธ OOM ะฝะฐ ะฟัะพะดะต.

**ะะฐะผะตัะฐะฝะธะต ะพ ะผะฝะพะณะพะฟะพัะพัะฝะพััะธ.**ยะัะปะธ ะฒั ะฟะตัะตะดะฐััะต ะพะฑัะตะบั ะธะท ะบััะธ ะดััะณะพะผั ะฟะพัะพะบั, ะฟะพะผะฝะธัะต: ะฑะตะท ะฝะฐะดะปะตะถะฐัะตะน ัะธะฝััะพะฝะธะทะฐัะธะธ (`volatile`,ย`synchronized`,ย`java.util.concurrent`) ะดััะณะพะน ะฟะพัะพะบ ะผะพะถะตั ัะฒะธะดะตัั ะพะฑัะตะบั ะฒ ัะฐััะธัะฝะพ ะธะฝะธัะธะฐะปะธะทะธัะพะฒะฐะฝะฝะพะผ ัะพััะพัะฝะธะธ โ ัััะปะบะฐ ัะถะต ะฝะตย`null`, ะฐ ะฟะพะปั ะตัั ัะพะดะตัะถะฐั ะทะฝะฐัะตะฝะธั ะฟะพ ัะผะพะปัะฐะฝะธั. ะญัะพ ัะตะผะฐ Java Memory Model (JMM), ะบะพัะพัะฐั ะฒััะพะดะธั ะทะฐ ัะฐะผะบะธ ััะพะน ััะฐััะธ, ะฝะพ ะพ ะบะพัะพัะพะน ะฒะฐะถะฝะพ ะทะฝะฐัั.

**ะะดะต ะฐะฝะฐะปะพะณะธั ยซะบะพัะพะฑะบะธ ะฒ ะบะพะผะฝะฐัะตยป ะปะพะผะฐะตััั:**

- GC ะผะพะถะตั ะฟะตัะตะผะตัะฐัั ะพะฑัะตะบัั ะฟัะธ ัะฟะปะพัะฝะตะฝะธะธ (ะบะพัะพะฑะบะธ ยซัะฐะผะธ ะฟะตัะตะตะทะถะฐััยป).
- JVM ะผะพะถะตั ัะฐััะธัััั ะบััั ะพัย`-Xms`ยะดะพย`-Xmx`ย(ะบะพะผะฝะฐัะฐ ยซัะฐัััะณะธะฒะฐะตัััยป).
- ะะปะปะพะบะฐัะธั ัะตัะตะท TLAB ะฟะพััะธ ะผะณะฝะพะฒะตะฝะฝะฐ (ะบะพัะพะฑะบะธ ยซะฟะพัะฒะปัััััยป ะฑะตะท ััะธะปะธะน).

### 3.5. Stack vs Heap โ ัะฒะพะดะฝะฐั ัะฐะฑะปะธัะฐ

|ะฅะฐัะฐะบัะตัะธััะธะบะฐ|Stack|Heap|
|---|---|---|
|ะกะบะพัะพััั ะฒัะดะตะปะตะฝะธั|ะกะดะฒะธะณ ัะบะฐะทะฐัะตะปั (ะฝะฐะฝะพัะตะบัะฝะดั)|Bump pointer ะฒ TLAB (ะฟะพััะธ ัะฐะบ ะถะต ะฑััััะพ)|
|ะะตะฐะปัะฝะฐั ัะตะฝะฐ|ะะธะฝะธะผะฐะปัะฝะฐ (ะดะฐะฝะฝัะต ะฟะพััะธ ะฒัะตะณะดะฐ ะฒ L1-ะบััะต)|GC, ะฟัะพะผะฐัะธ ะบััะฐ, overhead ะทะฐะณะพะปะพะฒะบะพะฒ|
|ะฃะฟัะฐะฒะปะตะฝะธะต|ะะฒัะพะผะฐัะธัะตัะบะพะต (ััะตะนะผ ัะฝะธะผะฐะตััั ะฟัะธ ะฒััะพะดะต)|GC (ะธะปะธ ะฒัััะฝัั ะฒ C/C++)|
|ะะฐะทะผะตั ะดะฐะฝะฝัั|ะัะตะดัะบะฐะทัะตะผัะน, ะฝะตะฑะพะปััะพะน|ะัะพะธะทะฒะพะปัะฝัะน|
|ะัะตะผั ะถะธะทะฝะธ|ะะพ ะฒััะพะดะฐ ะธะท ะผะตัะพะดะฐ|ะะพะบะฐ ะตััั ะดะพััะธะถะธะผะฐั ัััะปะบะฐ ะพั GC roots|
|ะขะธะฟะธัะฝะพะต ัะพะดะตัะถะธะผะพะต|ะัะธะผะธัะธะฒั, ัััะปะบะธ, ะฐะดัะตัะฐ ะฒะพะทะฒัะฐัะฐ|ะะฑัะตะบัั, ะผะฐััะธะฒั, ัััะพะบะธ|
|ะัะธะฑะบะฐ ะฟัะธ ะธััะตัะฟะฐะฝะธะธ|`StackOverflowError`|`OutOfMemoryError`|
|ะะฝะฐะปะพะณะธั|ะกัะพะฟะบะฐ ัะฐัะตะปะพะบ|ะะพัะพะฑะบะธ ะฒ ะบะพะผะฝะฐัะต|

### 3.6. ะัะพะผะตะถััะพัะฝัะน ะธัะพะณ

- **Stack**ยโ ะฑัััััะน, ะฐะฒัะพะผะฐัะธัะตัะบะธะน, ะดะปั ยซะบะพัะพัะบะพะถะธะฒััะธัยป ะดะฐะฝะฝัั. ะะตัะพะด ะทะฐะฒะตััะธะปัั โ ััะตะนะผ ัะฝัั โ ะดะฐะฝะฝัะต ะธััะตะทะปะธ. ะะฐะฝะฝัะต ััะตะบะฐ ะบะพะผะฟะฐะบัะฝั ะธ ะฟะพััะธ ะฒัะตะณะดะฐ ะฒ L1-ะบััะต โ ะฒะพั ะฟะพัะตะผั ััะตะบ ยซะฑัััััะนยป.
- **Heap**ยโ ะณะธะฑะบะธะน, ะดะปั ะพะฑัะตะบัะพะฒ ั ะฟัะพะธะทะฒะพะปัะฝัะผ ะฒัะตะผะตะฝะตะผ ะถะธะทะฝะธ. ะะปะปะพะบะฐัะธั ะฒ Java ะดะตััะฒะฐั (TLAB), ะฝะพ ะบะฐะถะดัะน ะพะฑัะตะบั โ ััะพ ะฝะฐะณััะทะบะฐ ะฝะฐ GC ะธ ะฟะพัะตะฝัะธะฐะปัะฝัะน ะฟัะพะผะฐั ะบััะฐ.
- **ะะฑะฐ ัะตะณะธะพะฝะฐ ะถะธะฒัั ะฒ ะพะดะฝะพะน ะธ ัะพะน ะถะต ัะธะทะธัะตัะบะพะน RAM.**ยะะฐะทะฝะธัะฐ โ ะฒ ะดะธััะธะฟะปะธะฝะต ะธัะฟะพะปัะทะพะฒะฐะฝะธั.

ะขะตะฟะตัั ั ะฝะฐั ะตััั ะฒัะต ะบะธัะฟะธัะธะบะธ, ััะพะฑั ะพัะฒะตัะธัั ะฝะฐ ะบะพะฝะบัะตัะฝัะน ะฟัะฐะบัะธัะตัะบะธะน ะฒะพะฟัะพั: ะฟะพัะตะผัย`int`ยะธย`Integer`ยะฒะตะดัั ัะตะฑั ะฟะพ-ัะฐะทะฝะพะผั โ ะธ ะฟะพัะตะผั ััะพ ะฝะต ยซัะตะพัะธัยป, ะฐ ะธััะพัะฝะธะบ ัะตะฐะปัะฝัั ะฑะฐะณะพะฒ ะธ ะฟัะพะฑะปะตะผ ั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพัััั.

---

## 4. ะกะฒัะทั ั Java: ะฟะพัะตะผัย`int`ยะฑัััััะน, ะฐย`Integer`ยโ ะฝะตั

### 4.1. ะัะธะผะธัะธะฒย`int`

Java

```
int x = 10;
```

- ะะฝะฐัะตะฝะธะตย`10`ยะปะตะถะธัย**ะฟััะผะพ ะฝะฐ ััะตะบะต**ยโ ะฒ ััะตะนะผะต ัะตะบััะตะณะพ ะผะตัะพะดะฐ.
- ะะฐะฝะธะผะฐะตั ัะพะฒะฝะพย**4 ะฑะฐะนัะฐ**. ะะธะบะฐะบะธั ะทะฐะณะพะปะพะฒะบะพะฒ, ะฝะธะบะฐะบะธั ัะบะฐะทะฐัะตะปะตะน.
- ะะฟะตัะฐัะธะธ ะบะพะผะฟะธะปะธัััััั ะฒ ัััะตะบัะธะฒะฝัะน ะฝะฐัะธะฒะฝัะน ะบะพะด. ะะพะณะดะฐ ะฒั ะฟะธัะตัะตย`x + y`, JVM-ะฑะฐะนัะบะพะด ัะพะดะตัะถะธั ะธะฝััััะบัะธัย`iadd`. ะะพ CPU ะฝะต ะฒัะฟะพะปะฝัะตั ะฑะฐะนัะบะพะด ะฝะฐะฟััะผัั โย**JIT-ะบะพะผะฟะธะปััะพั**ย(Just-In-Time) ะฟัะตะฒัะฐัะฐะตั ะตะณะพ ะฒย**ะฝะฐัะธะฒะฝัั ะผะฐัะธะฝะฝัั ะธะฝััััะบัะธั**ย`ADD`, ะบะพัะพััั ะฟัะพัะตััะพั ะฒัะฟะพะปะฝัะตั ะทะฐ ะพะดะธะฝ ัะฐะบั.

text

```
  ะะฐั ะบะพะด:     x + y
       โ
  JVM-ะฑะฐะนัะบะพะด: iadd         โ ะธะฝััััะบัะธั ะฒะธัััะฐะปัะฝะพะน ะผะฐัะธะฝั
       โ
  JIT-ะบะพะผะฟะธะปััะธั
       โ
  ะะฐัะธะฒะฝัะน ะบะพะด: ADD eax, ebx  โ ะธะฝััััะบัะธั ะฟัะพัะตััะพัะฐ (x86)
       โ
  CPU ะฒัะฟะพะปะฝัะตั ะทะฐ ~1 ัะฐะบั
```

ะญัะพ ะดะฒะฐ ัะฐะทะฝัั ััะพะฒะฝั:ย`iadd`ยโ ะธะฝััััะบัะธั JVM (ะฒะธัััะฐะปัะฝะพะน ะผะฐัะธะฝั),ย`ADD`ยโ ะธะฝััััะบัะธั ัะตะฐะปัะฝะพะณะพ ะฟัะพัะตััะพัะฐ. ะ ััะฐััะต, ะบะพัะพัะฐั ััะธั ัะฐะทะปะธัะฐัั ััะพะฒะฝะธ ะฐะฑัััะฐะบัะธะธ, ะฒะฐะถะฝะพ ะฝะต ะฟััะฐัั ะธั.

text

```
  STACK
  โโโโโโโโโโโโโโโโโโโ
  โ  x = 10         โ  โ 4 ะฑะฐะนัะฐ, ะทะฝะฐัะตะฝะธะต ะฟััะผะพ ะทะดะตัั
  โโโโโโโโโโโโโโโโโโโ

  ะะฑัะตะบัะพะฒ ะฒ ะบััะต: 0.  ะะฐะฑะพัั ะดะปั GC: 0.
```

### 4.2. ะะฑัััะบะฐย`Integer`

Java

```
Integer x = 10;  // autoboxing: Integer.valueOf(10)
```

- ะ ััะตะบะต ะปะตะถะธัย**ัััะปะบะฐ**ย(4 ะธะปะธ 8 ะฑะฐะนั).
- ะ ะบััะต ัะพะทะดะฐััััย**ะพะฑัะตะบั**ย`Integer`:
    - Object header โ 12 ะฑะฐะนั
    - ะะพะปะตย`value`ย= 4 ะฑะฐะนัะฐ
    - ะััะฐะฒะฝะธะฒะฐะฝะธะต ะดะพ ะบัะฐัะฝะพััะธ 8
    - **ะัะพะณะพ: ~16 ะฑะฐะนั**ยะฒ ะบััะต

text

```
  STACK                              HEAP
  โโโโโโโโโโโโโโโโโโโโ        โโโโโโโโโโโโโโโโโโโโโโโโโโโ
  โ  x โโโโโโโโโโโโโโโโโโโโโโโบโ  Integer object          โ
  โ  (ัััะปะบะฐ, 4-8 B) โ        โ  header:   12 ะฑะฐะนั      โ
  โโโโโโโโโโโโโโโโโโโโ        โ  value:    4 ะฑะฐะนัะฐ       โ
                              โ  padding:  ~0-4 ะฑะฐะนั     โ
                              โ  ะะขะะะ:    ~16 ะฑะฐะนั      โ
                              โโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

ะงัะพะฑั ะฟัะพัะธัะฐัั ะทะฝะฐัะตะฝะธะต, ะฟัะพัะตััะพั ะดะพะปะถะตะฝ:

1. ะะทััั ัััะปะบั ะธะท ััะตะบะฐ.
2. ะะตัะตะนัะธ ะฟะพ ะฐะดัะตัั ะฒ ะบััั (ะฒะพะทะผะพะถะตะฝย**ะฟัะพะผะฐั ะบััะฐ**ยโ ัะพัะฝะธ ัะฐะบัะพะฒ ะพะถะธะดะฐะฝะธั).
3. ะัะพะฟัััะธัั ะทะฐะณะพะปะพะฒะพะบ ะพะฑัะตะบัะฐ.
4. ะัะพัะธัะฐัั ะฟะพะปะตย`value`.

ะะธะฝะธะผัะผย**ะดะฒะฐ ะพะฑัะฐัะตะฝะธั ะบ ะฟะฐะผััะธ**ยะฒะผะตััะพ ะพะดะฝะพะณะพ. ะะปัั ะพะฑัะตะบั ะบะพะณะดะฐ-ะฝะธะฑัะดั ััะฐะฝะตั ะผััะพัะพะผ โ ะธ GC ะฟะพััะฐัะธั ะฒัะตะผั ะฝะฐ ะตะณะพ ัะฑะพัะบั.

**ะะฐัะบะพะปัะบะพ ััะพ ะพัััะธะผะพ ะฝะฐ ะฟัะฐะบัะธะบะต?**ยะะฐ ัะธะฟะธัะฝะพะผ JMH-ะฑะตะฝัะผะฐัะบะต (ััะผะผะธัะพะฒะฐะฝะธะต 10 ะผะธะปะปะธะพะฝะพะฒ ัะปะตะผะตะฝัะพะฒ)ย`int[]`ยะพะฑัะฐะฑะฐััะฒะฐะตััั ะฒย**3โ5ร ะฑััััะตะต**, ัะตะผย`Integer[]`. ะะฐ ะฑะพะปััะธั ะผะฐััะธะฒะฐั ั ัะฐัััะผะธ ะฟัะพะผะฐัะฐะผะธ ะบััะฐ ัะฐะทะฝะธัะฐ ะผะพะถะตั ะดะพััะธะณะฐััย**10ร**. ะญัะพ ะฝะต ะผะธะบัะพ-ะพะฟัะธะผะธะทะฐัะธั โ ััะพ ะฟะพััะดะพะบ ะฒะตะปะธัะธะฝั.

### 4.3. Autoboxing/Unboxing ะธ ะปะพะฒััะบะธ

Java ะฐะฒัะพะผะฐัะธัะตัะบะธ ะบะพะฝะฒะตััะธััะตัย`int`ยโย`Integer`. ะญัะพย**autoboxing**ยะธย**unboxing**:

Java

```
Integer a = 10;    // autoboxing:  int โ Integer (ะพะฑัะตะบั ะฒ ะบััะต)
int b = a;         // unboxing:    Integer โ int  (ะธะทะฒะปะตัะตะฝะธะต + null-check)
```

#### ะะพะฒััะบะฐ #1: ัะธะบะป ั ะพะฑัััะบะฐะผะธ

Java

```
// ะะฐัะธะฐะฝั 1: ะฟัะธะผะธัะธะฒ
long sum = 0L;
for (int i = 0; i < 1_000_000; i++) {
    sum += i;
}

// ะะฐัะธะฐะฝั 2: ะพะฑัััะบะฐ
Long sum = 0L;
for (int i = 0; i < 1_000_000; i++) {
    sum += i;  // unbox sum โ ัะปะพะถะธัั โ autobox ะพะฑัะฐัะฝะพ
}
```

ะะพ ะฒัะพัะพะผ ะฒะฐัะธะฐะฝัะต ะฝะฐ ะบะฐะถะดะพะน ะธัะตัะฐัะธะธ ะบะพะฝัะตะฟััะฐะปัะฝะพ ัะพะทะดะฐัััั ะฝะพะฒัะน ะพะฑัะตะบัย`Long`ยะฒ ะบััะต. ะะธะปะปะธะพะฝ ะธัะตัะฐัะธะน โ ะผะธะปะปะธะพะฝ ะพะฑัะตะบัะพะฒ โ ะฝะฐะณััะทะบะฐ ะฝะฐ GC.

> _(ะั ะธัะฟะพะปัะทัะตะผย`Long`ยะฒะผะตััะพย`Integer`ยะฒ ััะพะผ ะฟัะธะผะตัะต ะฝะฐะผะตัะตะฝะฝะพ. ะะปัย`Integer`ยัััะตััะฒัะตั ะบัั ะทะฝะฐัะตะฝะธะน ะฒ ะดะธะฐะฟะฐะทะพะฝะต [โ128, 127], ะบะพัะพััะน ะฟะตัะตะธัะฟะพะปัะทัะตั ะพะฑัะตะบัั โ ะธ ะฟัะธะผะตั ััะฐะป ะฑั ะฝะตะบะพััะตะบัะฝัะผ ะดะปั ะผะฐะปัั ะทะฝะฐัะตะฝะธะน ััะผะผั. ะะพะดัะพะฑะฝะตะต ะพ ะบััะต โ ะฒ ยง4.5.)_

**ะงะตััะฝะฐั ะพะณะพะฒะพัะบะฐ.**ยะ ะฟัะพัััั ัะปััะฐัั, ะบะพะณะดะฐย`sum`ยะฝะต ะฟะพะบะธะดะฐะตั ะผะตัะพะด, JIT-ะบะพะผะฟะธะปััะพั HotSpot (C2) ะผะพะถะตั ะฟัะธะผะตะฝะธััย**Escape Analysis**ยะธย**Scalar Replacement**: ะพะฝ ะพะฑะฝะฐััะถะธั, ััะพ ะพะฑัะตะบัย`Long`ยะฝะธะบัะดะฐ ะฝะต ยซัะฑะตะณะฐะตัยป, ะธ ัะฐะทะฒะตัะฝัั ะตะณะพ ะพะฑัะฐัะฝะพ ะฒ ัะตะณะธััั ะธะปะธ ััะตะบ. ะะพะด ะฑัะดะตั ัะฐะฑะพัะฐัั ัะฐะบ ะถะต ะฑััััะพ, ะบะฐะบ ั ะฟัะธะผะธัะธะฒะพะผ.

**ะะพ:**ยEscape Analysis ัะฐะฑะพัะฐะตั ะฝะต ะฒัะตะณะดะฐ. ะะฑัะตะบั ยซัะฑะตะณะฐะตัยป, ะตัะปะธ:

1. ะะพะทะฒัะฐัะฐะตััั ะธะท ะผะตัะพะดะฐ
2. ะัะธัะฒะฐะธะฒะฐะตััั ะฒ ะฟะพะปะต ะดััะณะพะณะพ ะพะฑัะตะบัะฐ
3. ะะตัะตะดะฐัััั ะฒ ะผะตัะพะด, ะบะพัะพััะน JIT ะฝะต ัะผะพะณ ะทะฐะธะฝะปะฐะนะฝะธัั

ะะพ ะฒัะตั ััะธั ัะปััะฐัั JIT ะฝะต ะผะพะถะตั ะณะฐัะฐะฝัะธัะพะฒะฐัั, ััะพ ะพะฑัะตะบั ะฝะต ะฝัะถะตะฝ ะฟะพัะปะต ะฒััะพะดะฐ ะธะท ะผะตัะพะดะฐ โ ะธ ะฒัะดะตะปัะตั ะตะณะพ ะฒ ะบััะต. ะ ัะตะฐะปัะฝัั ะฟัะธะปะพะถะตะฝะธัั ัย`List<Integer>`,ย`Map<String, Integer>`ยะธ ะฟะตัะตะดะฐัะตะน ะทะฝะฐัะตะฝะธะน ะผะตะถะดั ัะปะพัะผะธ โย**overhead ะฒะฟะพะปะฝะต ัะตะฐะปะตะฝ**. ะะต ะฟะพะปะฐะณะฐะนัะตัั ะฝะฐ JIT โ ะฟะธัะธัะต ะพัะพะทะฝะฐะฝะฝะพ.

#### ะะพะฒััะบะฐ #2: NullPointerException ะฟัะธ unboxing

`int`ยะฝะต ะผะพะถะตั ะฑัััย`null`.ย`Integer`ยโ ะผะพะถะตั. ะ ะฒะพั ััะพ ะฟัะพะธััะพะดะธั ะฟัะธ unboxingย`null`:

Java

```
Integer value = null;
int x = value;  // ๐ฅ NullPointerException!
```

ะะพะผะฟะธะปััะพั ะฝะต ะฟัะตะดัะฟัะตะดะธั. ะะพะด ะฒัะณะปัะดะธั ะฑะตะทะพะฑะธะดะฝะพ. ะะพ JVM ะฟััะฐะตััั ะฒัะทะฒะฐััย`value.intValue()`, ะฐย`value`ยโ ััะพย`null`.

ะญัะพ ะพะดะฝะฐ ะธะท ัะฐะผัั ัะฐัััั ะฟัะธัะธะฝ ะฟะฐะดะตะฝะธั ะฟัะพะดะฐะบัะตะฝะฐ, ะพัะพะฑะตะฝะฝะพ ะบะพะณะดะฐย`Integer`ยะฟัะธัะพะดะธั:

- ะธะท ะฑะฐะทั ะดะฐะฝะฝัั (nullable-ะบะพะปะพะฝะบะฐ),
- ะธะท JSON (ะพััััััะฒัััะตะต ะฟะพะปะต),
- ะธะทย`Map.get()`ย(ะบะปัั ะฝะต ะฝะฐะนะดะตะฝ).

### 4.4. ะะพัะตะผั ััะพ ะฒะฐะถะฝะพ: ัะฒะพะดะฝะฐั ัะฐะฑะปะธัะฐ

||`int`|`Integer`|
|---|---|---|
|ะะดะต ััะฐะฝะธััั|Stack (ะทะฝะฐัะตะฝะธะต)|Stack (ัััะปะบะฐ) + Heap (ะพะฑัะตะบั)|
|ะะฐะทะผะตั|4 ะฑะฐะนัะฐ|~20 ะฑะฐะนั (ัััะปะบะฐ + ะพะฑัะตะบั)|
|ะะพัััะฟ|1 ะพะฑัะฐัะตะฝะธะต ะบ ะฟะฐะผััะธ|2+ ะพะฑัะฐัะตะฝะธะน|
|GC|ะะต ะฝัะถะตะฝ|ะัะถะตะฝ|
|`null`|ะะตะฒะพะทะผะพะถะตะฝ|ะะพะทะผะพะถะตะฝ (ะธ ะพะฟะฐัะตะฝ ะฟัะธ unboxing)|
|Generics|`List<int>`ยโ ะฝะตะปัะทั|`List<Integer>`ยโ ะผะพะถะฝะพ|
|Cache-friendly|ะะฐ (ะบะพะผะฟะฐะบัะฝัะต ะดะฐะฝะฝัะต)|ะะตั (ะพะฑัะตะบั ะผะพะถะตั ะฑััั ะณะดะต ัะณะพะดะฝะพ ะฒ ะบััะต)|

ะะฑัััะฐะบัะธั ยซะฒัั โ ะพะฑัะตะบัยป ัะดะพะฑะฝะฐ: ะตะดะธะฝะพะพะฑัะฐะทะธะต, generics, nullable-ัะธะฟั. ะะพ ะทะฐ ะฝะตั ะตััั ัะตะฝะฐ โ ัะตะฐะปัะฝัะต ะฑะฐะนัั, ะฝะฐะฝะพัะตะบัะฝะดั ะธย`NullPointerException`ยะฝะฐ ะฟัะพะดะต.

### 4.5. Integer Cache: ะบะพะณะดะฐย`new`ยะฝะต ะฟัะพะธััะพะดะธั

ะััั ะตัั ะพะดะฝะฐ ะปะพะฒััะบะฐ, ะบะพัะพัะฐั ะดะตะปะฐะตั ะฟะพะฒะตะดะตะฝะธะตย`Integer`ยะฝะตะธะฝััะธัะธะฒะฝัะผ. ะะพะฟัะพะฑัะนัะต ัะณะฐะดะฐัั ัะตะทัะปััะฐั:

Java

```
Integer a = 127;
Integer b = 127;
System.out.println(a == b);  // ?

Integer c = 128;
Integer d = 128;
System.out.println(c == d);  // ?
```

ะัะฒะตั:ย`true`ยะธย`false`.

**ะะพัะตะผั?**ยะะพะณะดะฐ ะฒั ะฟะธัะตัะตย`Integer x = 127`, ะบะพะผะฟะธะปััะพั ะฟัะตะฒัะฐัะฐะตั ััะพ ะฒย`Integer.valueOf(127)`. ะ ะฒะฝัััะธย`Integer.valueOf()`ยะตััั ะบัั:

Java

```
// ะฃะฟัะพััะฝะฝะฐั ัะตะฐะปะธะทะฐัะธั Integer.valueOf()
public static Integer valueOf(int i) {
    if (i >= -128 && i <= 127) {
        return IntegerCache.cache[i + 128];  // ะฒะพะทะฒัะฐัะฐะตั ะกะฃะฉะะกะขะะฃะฎะฉะะ ะพะฑัะตะบั
    }
    return new Integer(i);                    // ัะพะทะดะฐัั ะะะะซะ ะพะฑัะตะบั
}
```

ะะปั ะทะฝะฐัะตะฝะธะน ะพัย**โ128 ะดะพ 127**ยJVM ะฟะตัะตะธัะฟะพะปัะทัะตั ะทะฐัะฐะฝะตะต ัะพะทะดะฐะฝะฝัะต ะพะฑัะตะบััย`Integer`. ะญัะพ ะทะฝะฐัะธั:

- `Integer.valueOf(127)`ยะบะฐะถะดัะน ัะฐะท ะฒะพะทะฒัะฐัะฐะตัย**ะพะดะธะฝ ะธ ัะพั ะถะต ะพะฑัะตะบั**. ะะพััะพะผัย`a == b`ยโ ััะพ ััะฐะฒะฝะตะฝะธะต ะพะดะฝะพะน ะธ ัะพะน ะถะต ัััะปะบะธ โย`true`.
- `Integer.valueOf(128)`ยะบะฐะถะดัะน ัะฐะท ัะพะทะดะฐััย**ะฝะพะฒัะน ะพะฑัะตะบั**. ะะพััะพะผัย`c == d`ยโ ััะพ ััะฐะฒะฝะตะฝะธะต ัะฐะทะฝัั ัััะปะพะบ โย`false`, ัะพัั ะทะฝะฐัะตะฝะธั ะพะดะธะฝะฐะบะพะฒัะต.

text

```
  Integer a = 127;  โโโ
                      โโโโบ ะพะดะธะฝ ะธ ัะพั ะถะต ะพะฑัะตะบั ะฒ ะบััะต  โ a == b: true
  Integer b = 127;  โโโ

  Integer c = 128;  โโโบ ะพะฑัะตะบั #1 ะฒ ะบััะต  โ
                                          โโโ ัะฐะทะฝัะต ะพะฑัะตะบัั โ c == d: false
  Integer d = 128;  โโโบ ะพะฑัะตะบั #2 ะฒ ะบััะต  โ
```

**ะัะฐะฒะธะปะพ:**ยะดะปั ััะฐะฒะฝะตะฝะธั ะทะฝะฐัะตะฝะธะน ะพะฑัััะพะบย**ะฒัะตะณะดะฐ ะธัะฟะพะปัะทัะนัะตย`.equals()`**, ะฝะธะบะพะณะดะฐ โย`==`.

Java

```
c.equals(d);  // true โ ััะฐะฒะฝะธะฒะฐะตั ะะะะงะะะะฏ
c == d;       // false โ ััะฐะฒะฝะธะฒะฐะตั ะกะกะซะะะ (ัะฐะทะฝัะต ะพะฑัะตะบัั)
```

**ะะตัะฐะปะธ:**

- ะะธะฐะฟะฐะทะพะฝ ะบััะฐ ะฟะพ ัะผะพะปัะฐะฝะธั:ย**[โ128, 127]**.
- ะะตััะฝัั ะณัะฐะฝะธัั ะผะพะถะฝะพ ะธะทะผะตะฝะธัั ัะตัะตะทย`-XX:AutoBoxCacheMax=N`ย(ะฝะพ ะฝะธะถะฝัั ะฒัะตะณะดะฐ โ128).
- `new Integer(127)`ย**ะฝะต**ยะธัะฟะพะปัะทัะตั ะบัั โ ะฒัะตะณะดะฐ ัะพะทะดะฐัั ะฝะพะฒัะน ะพะฑัะตะบั. ะะผะตะฝะฝะพ ะฟะพััะพะผัย`new Integer(127) == new Integer(127)`ยะฒัะตะณะดะฐย`false`. (ะะพะฝััััะบัะพัย`new Integer()`ยัััะฐัะตะป ะฝะฐัะธะฝะฐั ั Java 9 โ ะธัะฟะพะปัะทัะนัะตย`Integer.valueOf()`.)
- ะะฝะฐะปะพะณะธัะฝัะต ะบััะธ ะตััั ัย`Long`ย(โ128โฆ127),ย`Short`,ย`Byte`ยะธย`Character`ย(0โฆ127).

ะญัะพ ะพะดะฝะฐ ะธะท ัะฐะผัั ะฝะฐะณะปัะดะฝัั ะดะตะผะพะฝัััะฐัะธะนย**ยซััะตัะบะธ ะฐะฑัััะฐะบัะธะธยป**ยะฒ Java: ะพะฟะตัะฐัะพัย`==`ยะฒะตะดัั ัะตะฑั ะฟะพ-ัะฐะทะฝะพะผั ะดะปั ะทะฝะฐัะตะฝะธะน 127 ะธ 128, ัะพัั ั ัะพัะบะธ ะทัะตะฝะธั ะฑะธะทะฝะตั-ะปะพะณะธะบะธ ะผะตะถะดั ะฝะธะผะธ ะฝะตั ะฝะธะบะฐะบะพะน ัะฐะทะฝะธัั.

### 4.6. ะัะพะณ ัะฐะทะดะตะปะฐ

ะญัะพ ะธ ะตััั ััะตัะบะฐ ะฐะฑัััะฐะบัะธะธ: ััะพะฑั ะฟะธัะฐัั ะฝะฐะดัะถะฝัะน ะธ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝัะน ะบะพะด, ะฝัะถะฝะพ ะทะฝะฐัั, ััะพ ะฝะฐัะพะดะธััั ะฟะพะด ะบะฐะฟะพัะพะผ. Java ะฟัััะตั ะดะตัะฐะปะธ โ ะฝะพ ะฝะต ะพัะผะตะฝัะตั ัะธะทะธะบั.

- `int`ยโ 4 ะฑะฐะนัะฐ ะฝะฐ ััะตะบะต, ะพะดะฝะพ ะพะฑัะฐัะตะฝะธะต ะบ ะฟะฐะผััะธ, ะฝะตั GC.
- `Integer`ยโ ~20 ะฑะฐะนั (ััะตะบ + ะบััะฐ), ะดะฒะฐ+ ะพะฑัะฐัะตะฝะธั, ะฝะฐะณััะทะบะฐ ะฝะฐ GC, ะปะพะฒััะบะฐ ัย`null`, ะปะพะฒััะบะฐ ัย`==`ยะธะท-ะทะฐ Integer Cache.
- `==`ยะดะปั ะพะฑัััะพะบ ััะฐะฒะฝะธะฒะฐะตั ัััะปะบะธ, ะฐ ะฝะต ะทะฝะฐัะตะฝะธั. ะัะฟะพะปัะทัะนัะตย`.equals()`.
- Autoboxing ะฒ ัะธะบะปะฐั โ ะฟะพัะตะฝัะธะฐะปัะฝะพ ะผะธะปะปะธะพะฝั ะปะธัะฝะธั ะพะฑัะตะบัะพะฒ.

---

## 5. ะะฐะดะฐะฝะธั ะดะปั ัะฐะผะพะฟัะพะฒะตัะบะธ

### 5.1. ยซRAM vs ะะธัะบ vs ะัั โ ะพะฑัััะฝะธ ัะฐะทะฝะธััยป

**ะะพะฟัะพั.**ยะะพัะตะผั ัะตะบััะพะฒัะน ัะตะดะฐะบัะพั ะพัะบััะฒะฐะตั ัะฐะนะป ะฝะฐ 10 ะะ ะผะณะฝะพะฒะตะฝะฝะพ, ะฐ ะฒะธะดะตะพะฟะปะตะตั ยซะฑััะตัะธะทะธััะตัยป ะฒะธะดะตะพ ะฝะฐ 2 ะะ? ะะฑัััะฝะธัะต ั ัะพัะบะธ ะทัะตะฝะธั ะธะตัะฐััะธะธ ะฟะฐะผััะธ (ะดะธัะบ โ RAM โ ะบัั โ CPU).

**ะะพะฝัั.**ยะะพัะตะผั ะฟัะธ ะฝะตัะฒะฐัะบะต ะพะฟะตัะฐัะธะฒะฝะพะน ะฟะฐะผััะธ ะบะพะผะฟัััะตั ะฝะฐัะธะฝะฐะตั ยซัะพัะผะพะทะธััยป, ะดะฐะถะต ะตัะปะธ ะฝะฐ ะดะธัะบะต ะฟะพะปะฝะพ ะผะตััะฐ?

### 5.2. ยซCPU-ัะธะบะป ะฝะฐ ะฑัะผะฐะณะตยป

ะ RAM ะฟะพ ะฐะดัะตัะฐะผ ะปะตะถะฐั ะธะฝััััะบัะธะธ (ะฟัะตะฒะดะพะบะพะด):

text

```
[0]  LOAD 5    โ ัะตะณะธััั A
[1]  LOAD 3    โ ัะตะณะธััั B
[2]  ADD A, B  โ ัะตะณะธััั A
[3]  STORE A   โ ะฐะดัะตั 100
```

ะัะพะนะดะธัะต ะฟะพ ัะฐะณะฐะผ Fetch โ Decode โ Execute ะดะปั ะบะฐะถะดะพะน ัััะพะบะธ. ะะพัะปะต ะบะฐะถะดะพะณะพ ัะฐะณะฐ ะทะฐะฟะธัะธัะต:

|ะจะฐะณ|PC|Reg A|Reg B|RAM[100]|
|---|---|---|---|---|
|Init|0|โ|โ|โ|
|ะะพัะปะต [0]|?|?|?|?|
|ะะพัะปะต [1]|?|?|?|?|
|ะะพัะปะต [2]|?|?|?|?|
|ะะพัะปะต [3]|?|?|?|?|

### 5.3. ยซStack-ััะตะนั ััะบะฐะผะธยป

Java

```
void main()  { a(); }
void a()     { b(); }
void b()     { int x = 42; }
```

**ะะฐะดะฐะฝะธะต 1.**ยะะฐัะธััะนัะต ัะพััะพัะฝะธะต ััะตะบะฐ ะฒ ะผะพะผะตะฝั ะฒัะฟะพะปะฝะตะฝะธัย`int x = 42`. ะะฐะบะธะต ััะตะนะผั ะปะตะถะฐั ะธ ะฒ ะบะฐะบะพะผ ะฟะพััะดะบะต?

**ะะฐะดะฐะฝะธะต 2.**ยะ ะบะฐะบะพะผ ะฟะพััะดะบะต ััะตะนะผั ัะฝะธะผัััั ัะพ ััะตะบะฐ?

**ะะฐะดะฐะฝะธะต 3 โญ.**ยะงัะพ ะฑัะดะตั, ะตัะปะธย`b()`ยะฒัะทะพะฒะตั ัะฐะผ ัะตะฑั ะฑะตะท ััะปะพะฒะธั ะฒััะพะดะฐ? ะะฐัะธััะนัะต ะฟัะพะธััะพะดััะตะต ะธ ะฝะฐะทะพะฒะธัะต ะพัะธะฑะบั.

### 5.4. ยซะะดะต ะถะธะฒัั?ยป

ะะปั ะบะฐะถะดะพะณะพ ััะฐะณะผะตะฝัะฐ ัะบะฐะถะธัะต: ะณะดะต ััะฐะฝัััั ะดะฐะฝะฝัะต (Stack, Heap ะธะปะธ ะพะฑะฐ) ะธ ะฟะพัะตะผั.

Java

```
a) int count = 10;
b) String name = new String("Alice");
c) int[] arr = new int[5];
d) Integer wrapped = 42;
```

|ะะพะด|Stack|Heap|ะะพัะตะผั (ะทะฐะฟะพะปะฝะธัะต)|
|---|---|---|---|
|a)ย`int count = 10`|?|?||
|b)ย`String name = new String("Alice")`|?|?||
|c)ย`int[] arr = new int[5]`|?|?||
|d)ย`Integer wrapped = 42`|?|?||

**ะะพะฝัั.**ยะัะปะธย`int x`ยโ ะฟะพะปะต ะพะฑัะตะบัะฐย`class Counter { int x = 0; }`, ัะพ ะณะดะต ััะฐะฝะธัััย`x`? ะะพัะตะผั ะพัะฒะตั ะพัะปะธัะฐะตััั ะพั ะฟัะฝะบัะฐ (a)?

### 5.5. ยซะะพััะธัะฐะน ะฟะฐะผัััยป โญ

ะัะตะฝะธัะต ัะฐะทะผะตั ะฒ ะฑะฐะนัะฐั (ััะธัะฐะนัะต: object header = 12 ะฑะฐะนั,ย**ะทะฐะณะพะปะพะฒะพะบ ะผะฐััะธะฒะฐ = 16 ะฑะฐะนั**ย(12 + 4 ะฝะฐ length), ะฒััะฐะฒะฝะธะฒะฐะฝะธะต ะดะพ 8 ะฑะฐะนั, ัััะปะบะฐ = 4 ะฑะฐะนัะฐ ะฟัะธ Compressed Oops):

Java

```
a) int x = 1;                  โ ? ะฑะฐะนั ะฝะฐ ััะตะบะต
b) Integer x = 1;              โ ? ะฝะฐ ััะตะบะต + ? ะฒ ะบััะต = ? ะฒัะตะณะพ
c) int[] arr = new int[100];   โ ? ะฝะฐ ััะตะบะต + ? ะฒ ะบััะต = ? ะฒัะตะณะพ
```

**ะะพะดัะบะฐะทะบะธ:**

- **(a):**ยะฟัะธะผะธัะธะฒ, ะฝะธะบะฐะบะธั ะพะฑัะตะบัะพะฒ.
- **(b):**ยัััะปะบะฐ ะฒ ััะตะบะต + ะพะฑัะตะบัย`Integer`ยะฒ ะบััะต (header + value + padding).
- **(c):**ยะผะฐััะธะฒ โ ััะพ ะพะฑัะตะบั. ะฃ ะฝะตะณะพย**ะทะฐะณะพะปะพะฒะพะบ 16 ะฑะฐะนั**ย(12 ััะฐะฝะดะฐััะฝัะน header + 4 ะฟะพะปะตย`length`), ะธ ัะฐะผะธ ะดะฐะฝะฝัะต (100 ร 4 ะฑะฐะนัะฐ). ะะปัั ัััะปะบะฐ ะฒ ััะตะบะต.

### 5.6. ยซNPE-ะดะตัะตะบัะธะฒยป โญ

ะะฐะนะดะธัะต ัััะพะบั, ะฝะฐ ะบะพัะพัะพะน ัะฟะฐะดััย`NullPointerException`, ะธ ะพะฑัััะฝะธัะต ะฟะพัะตะผั:

Java

```
Map<String, Integer> scores = new HashMap<>();
scores.put("Alice", 95);

int aliceScore = scores.get("Alice");  // ัััะพะบะฐ 1
int bobScore = scores.get("Bob");      // ัััะพะบะฐ 2
```

**ะะพะดัะบะฐะทะบะฐ.**ยะงัะพ ะฒะพะทะฒัะฐัะฐะตัย`Map.get()`ยะดะปั ะฝะตัััะตััะฒัััะตะณะพ ะบะปััะฐ? ะงัะพ ะฟัะพะธััะพะดะธั ะฟัะธ unboxing ััะพะณะพ ะทะฝะฐัะตะฝะธั?

### 5.7. ยซInteger Cache โ ะฟัะตะดัะบะฐะถะธ ัะตะทัะปััะฐัยป โญ

Java

```
Integer a = 127;
Integer b = 127;
System.out.println(a == b);      // ัััะพะบะฐ 1: ?

Integer c = 128;
Integer d = 128;
System.out.println(c == d);      // ัััะพะบะฐ 2: ?

Integer e = new Integer(127);
Integer f = new Integer(127);
System.out.println(e == f);      // ัััะพะบะฐ 3: ?

System.out.println(a.equals(b)); // ัััะพะบะฐ 4: ?
System.out.println(c.equals(d)); // ัััะพะบะฐ 5: ?
```

ะะปั ะบะฐะถะดะพะน ัััะพะบะธ: ะฟัะตะดัะบะฐะถะธัะต ัะตะทัะปััะฐั (`true`/`false`) ะธ ะพะฑัััะฝะธัะต ั ัะพัะบะธ ะทัะตะฝะธั Integer Cache ะธ ัะฐะทะฝะธัั ะผะตะถะดัย`==`ย(ััะฐะฒะฝะตะฝะธะต ัััะปะพะบ) ะธย`.equals()`ย(ััะฐะฒะฝะตะฝะธะต ะทะฝะฐัะตะฝะธะน).

---

## 6. ะงัะพ ะพััะฐะปะพัั ะทะฐ ะบะฐะดัะพะผ

ะญัะฐ ััะฐััั โ ััะฝะดะฐะผะตะฝั, ะฝะต ัะฝัะธะบะปะพะฟะตะดะธั. ะะพั ัะตะผั, ะบะพัะพััะต ะปะพะณะธัะตัะบะธ ะฟัะพะดะพะปะถะฐัั ัะฐััะบะฐะทะฐะฝะฝะพะต ะธ ััะพัั ะพัะดะตะปัะฝะพะณะพ ะธะทััะตะฝะธั:

- **Java Memory Model (JMM) ะธ happens-before.**ยะะฐะบ ะฟะพัะพะบะธ ยซะฒะธะดััยป ะธะทะผะตะฝะตะฝะธั ะดััะณ ะดััะณะฐ, ะฟะพัะตะผัย`volatile`ยะธย`synchronized`ยโ ะฝะต ะฟัะพััะพ ยซะทะฐะผะบะธยป, ะฐ ะฑะฐััะตัั ะฟะฐะผััะธ.
- **ะะพะบะพะปะตะฝะธั GC (Young/Old) ะธ ัะพะฒัะตะผะตะฝะฝัะต ัะฑะพััะธะบะธ (G1, ZGC, Shenandoah).**ยะะฐะบ GC ัะบัะฟะปัะฐัะธััะตั ะณะธะฟะพัะตะทั ะพ ะฟะพะบะพะปะตะฝะธัั ะธ ะฟะพัะตะผั ะฑะพะปััะธะฝััะฒะพ ะพะฑัะตะบัะพะฒ ัะผะธัะฐะตั ะผะพะปะพะดัะผะธ.
- **Metaspace ะธ ะทะฐะณััะทะบะฐ ะบะปะฐััะพะฒ.**ยะะดะต ะถะธะฒัั ะผะตัะฐะดะฐะฝะฝัะต ะบะปะฐััะพะฒ, ะบะฐะบ ััะตะบะฐัั classloader'ั, ะธ ะฟะพัะตะผั hot redeploy ะธะฝะพะณะดะฐ ะฟัะธะฒะพะดะธั ะบ OOM.
- **String pool ะธ ะธะฝัะตัะฝะธัะพะฒะฐะฝะธะต ัััะพะบ.**ย`String.intern()`, ะปะธัะตัะฐะปั ะฒ constant pool, ะธ ะฟะพัะตะผัย`==`ยะดะปั ัััะพะบะพะฒัั ะปะธัะตัะฐะปะพะฒ ัะฐะฑะพัะฐะตั ยซะธะฝะพะณะดะฐยป โ ะฟะพ ัะพะน ะถะต ะฟัะธัะธะฝะต, ััะพ ะธ ะดะปัย`Integer`.
- **Project Valhalla ะธ value types.**ยะัะดััะตะต Java: ะฟัะธะผะธัะธะฒะฝัะต ะบะปะฐััั, ะบะพัะพััะต ะฟะพะทะฒะพะปัั ััะฐะฝะธัั ยซะพะฑัะตะบััยป ะฑะตะท ะทะฐะณะพะปะพะฒะบะพะฒ, ะฟััะผะพ ะฒ ะผะฐััะธะฒะฐั โ ะบะฐะบย`int`, ะฝะพ ั ะผะตัะพะดะฐะผะธ. ะญัะพ ะผะพะถะตั ััััะฐะฝะธัั ะณะปะฐะฒะฝัั ะฟัะพะฑะปะตะผั, ะพะฟะธัะฐะฝะฝัั ะฒ ัะฐะทะดะตะปะต 4.
- **ะะธัััะฐะปัะฝะฐั ะฟะฐะผััั: ัััะฐะฝะธัั, TLB, large pages.**ยะะฐะบ ะะก ะฝะฐ ัะฐะผะพะผ ะดะตะปะต ะพัะพะฑัะฐะถะฐะตั ะฒะธัััะฐะปัะฝัะต ะฐะดัะตัะฐ ะฝะฐ ัะธะทะธัะตัะบะธะต ะธ ะฟะพัะตะผัย`-XX:+UseLargePages`ยะผะพะถะตั ััะบะพัะธัั ะฟัะธะปะพะถะตะฝะธะต.
- **NUMA-ะฐััะธัะตะบัััะฐ.**ยะะปั ะผะฝะพะณะพัะพะบะตัะฝัั ัะตัะฒะตัะพะฒ: ะฝะต ะฒัั RAM ะพะดะธะฝะฐะบะพะฒะพ ะฑะปะธะทะบะฐ ะบะพ ะฒัะตะผ ัะดัะฐะผ. ะะบััะฐะปัะฝะพ ะดะปั ััะฝะธะฝะณะฐ GC ะฝะฐ ัะตัะฒะตัะฐั ั ัะพัะฝัะผะธ ะณะธะณะฐะฑะฐะนั ะฟะฐะผััะธ.

---

## ะะฐะบะปััะตะฝะธะต

ะั ะดะพัะธัะฐะปะธ ะดะพ ะบะพะฝัะฐ. ะขะตะฟะตัั ะฒั ะทะฝะฐะตัะต, ััะพย`StackOverflowError`ยโ ััะพ ะฝะต ะฐะฑัััะฐะบัะฝะฐั ะผะฐะณะธั, ะฐ ััะพะฟะบะฐ ัะฐัะตะปะพะบ, ะดะพัะพััะฐั ะดะพ ะฟะพัะพะปะบะฐ. ะงัะพย`OutOfMemoryError`ยโ ััะพ ะบะพะผะฝะฐัะฐ, ะทะฐะฑะธัะฐั ะบะพัะพะฑะบะฐะผะธ, ะดะพ ะบะพัะพััั ะฒะตะดัั ะทะฐะฟะธัะบะธ ะพั ะดะฒะตัะธ. ะ ััะพ ัะฐะทะฝะธัะฐ ะผะตะถะดัย`int`ยะธย`Integer`ยโ ััะพ ะฝะต ะฒะพะฟัะพั ััะธะปั, ะฐ ะฒะพะฟัะพั ัะตััััั ะฑะฐะนั ะฟัะพัะธะฒ ะดะฒะฐะดัะฐัะธ, ะพะดะฝะพะณะพ ะพะฑัะฐัะตะฝะธั ะบ ะฟะฐะผััะธ ะฟัะพัะธะฒ ะดะฒัั, ะธ ะพััััััะฒะธั NPE ะฟัะพัะธะฒ ะฑะพะผะฑั ะทะฐะผะตะดะปะตะฝะฝะพะณะพ ะดะตะนััะฒะธั.

ะ ะตัั ะฒั ะทะฝะฐะตัะต, ััะพย`Integer.valueOf(127) == Integer.valueOf(127)`ยโ ััะพย`true`, ะฝะพย`Integer.valueOf(128) == Integer.valueOf(128)`ยโ ััะพย`false`. ะ ััะพ ะทะฐ ััะธะผ ััะพะธั ะฝะต ะผะฐะณะธั, ะฐ ะบัั ะพะฑัะตะบัะพะฒ ะฒ JVM.

ะะฑัััะฐะบัะธะธ ะฟะพ-ะฟัะตะถะฝะตะผั ะฑัะดัั ัะตัั. ะะพ ัะตะฟะตัั ั ะฒะฐั ะตััั ะฒะตะดัะพ.